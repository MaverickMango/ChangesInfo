{
  "logger": {
    "currentLogLevel": 20,
    "name": "root.bean.benchmarks.Defects4JBug"
  },
  "d4jCmd": "/home/liumengjiao/Desktop/defects4j/framework/bin/defects4j",
  "dataDir": "data/changesInfo/",
  "timeoutSecond": 300,
  "proj": "Closure",
  "id": "68",
  "workingDir": "../bugs/Closure_68_buggy",
  "inducingCommit": "5709ec1d0bbe5b7726a14d06f7eab9c35150e314",
  "originalCommit": "7fbff508f8590793108aa192a1898dc617e7b040",
  "bug_name": "Closure_68",
  "derive": "defects4j",
  "original_fixing_commit": "9d5a6e3082dd99f6c44df1b3526b9e83b79aa7da",
  "buildFiles_changed": false,
  "inducing_changes": [
    {
      "changed_type": "UPDATE",
      "changed_class": [
        "src/com/google/javascript/jscomp/Compiler.java",
        "src/com/google/javascript/jscomp/Compiler.java"
      ],
      "changed_functions": [
        {
          "qualified_names": [
            "initOptions"
          ],
          "num": 1
        },
        {
          "qualified_names": [
            "initOptions"
          ],
          "num": 1
        }
      ],
      "changed_lines": [
        {
          "qualified_names": [
            "255"
          ],
          "num": 1
        },
        {
          "qualified_names": [
            "256",
            "257",
            "258",
            "259",
            "260",
            "261",
            "262",
            "263",
            "264",
            "265",
            "266",
            "267",
            "268",
            "269",
            "270",
            "271"
          ],
          "num": 16
        }
      ],
      "diff": "diff --git a/src/com/google/javascript/jscomp/Compiler.java b/src/com/google/javascript/jscomp/Compiler.java\nindex 30215f4..0789e86 100644\n--- a/src/com/google/javascript/jscomp/Compiler.java\n+++ b/src/com/google/javascript/jscomp/Compiler.java\n@@ -253,6 +253,22 @@\n       guards.add(new DiagnosticGroupWarningsGuard(\n           DiagnosticGroups.CHECK_VARIABLES, CheckLevel.OFF));\n     }\n+\n+    // DiagnosticGroups override the plain checkTypes option.\n+    if (options.enables(DiagnosticGroups.CHECK_TYPES)) {\n+      options.checkTypes \u003d true;\n+    } else if (options.disables(DiagnosticGroups.CHECK_TYPES)) {\n+      options.checkTypes \u003d false;\n+    } else if (!options.checkTypes) {\n+      // If DiagnosticGroups did not override the plain checkTypes\n+      // option, and checkTypes is enabled, then turn off the\n+      // parser type warnings.\n+      guards.add(\n+          new DiagnosticGroupWarningsGuard(\n+              DiagnosticGroup.forType(\n+                  RhinoErrorReporter.TYPE_PARSE_ERROR),\n+              CheckLevel.OFF));\n+    }\n     this.warningsGuard \u003d new ComposeWarningsGuard(guards);\n   }\n \n",
      "operations": [
        {
          "type": "insert-tree",
          "from": "",
          "to": "IfStatement [8523,9100]"
        }
      ]
    },
    {
      "changed_type": "UPDATE",
      "changed_class": [
        "src/com/google/javascript/jscomp/DefaultPassConfig.java",
        "src/com/google/javascript/jscomp/DefaultPassConfig.java"
      ],
      "changed_functions": [
        {
          "qualified_names": [
            "getChecks"
          ],
          "num": 1
        },
        {
          "qualified_names": [
            "getChecks"
          ],
          "num": 1
        }
      ],
      "changed_lines": [
        {
          "qualified_names": [
            "241",
            "242",
            "243",
            "244",
            "245",
            "246",
            "247"
          ],
          "num": 7
        },
        {
          "qualified_names": [
            "240"
          ],
          "num": 1
        }
      ],
      "diff": "diff --git a/src/com/google/javascript/jscomp/DefaultPassConfig.java b/src/com/google/javascript/jscomp/DefaultPassConfig.java\nindex 3d065d4..ab09265 100644\n--- a/src/com/google/javascript/jscomp/DefaultPassConfig.java\n+++ b/src/com/google/javascript/jscomp/DefaultPassConfig.java\n@@ -238,13 +238,6 @@\n       checks.add(objectPropertyStringPreprocess);\n     }\n \n-    // DiagnosticGroups override the plain checkTypes option.\n-    if (options.enables(DiagnosticGroups.CHECK_TYPES)) {\n-      options.checkTypes \u003d true;\n-    } else if (options.disables(DiagnosticGroups.CHECK_TYPES)) {\n-      options.checkTypes \u003d false;\n-    }\n-\n     if (options.checkTypes) {\n       checks.add(resolveTypes.makeOneTimePass());\n       checks.add(inferTypes.makeOneTimePass());\n",
      "operations": [
        {
          "type": "delete-tree",
          "from": "IfStatement [8041,8231]",
          "to": ""
        }
      ]
    },
    {
      "changed_type": "UPDATE",
      "changed_class": [
        "src/com/google/javascript/jscomp/RhinoErrorReporter.java",
        "src/com/google/javascript/jscomp/RhinoErrorReporter.java"
      ],
      "changed_functions": [
        {
          "qualified_names": [
            "makeError",
            "RhinoErrorReporter",
            "replacePlaceHolders"
          ],
          "num": 3
        },
        {
          "qualified_names": [
            "replacePlaceHolders",
            "makeError",
            "RhinoErrorReporter"
          ],
          "num": 3
        }
      ],
      "changed_lines": [
        {
          "qualified_names": [
            "37",
            "56",
            "65",
            "67",
            "93",
            "122",
            "123"
          ],
          "num": 7
        },
        {
          "qualified_names": [
            "38",
            "39",
            "40",
            "59",
            "68",
            "70",
            "96",
            "97",
            "98",
            "99",
            "100",
            "129",
            "130"
          ],
          "num": 13
        }
      ],
      "diff": "diff --git a/src/com/google/javascript/jscomp/RhinoErrorReporter.java b/src/com/google/javascript/jscomp/RhinoErrorReporter.java\nindex cdcd2da..321cdd5 100644\n--- a/src/com/google/javascript/jscomp/RhinoErrorReporter.java\n+++ b/src/com/google/javascript/jscomp/RhinoErrorReporter.java\n@@ -35,6 +35,9 @@\n   static final DiagnosticType PARSE_ERROR \u003d\n       DiagnosticType.error(\"JSC_PARSE_ERROR\", \"Parse error. {0}\");\n \n+  static final DiagnosticType TYPE_PARSE_ERROR \u003d\n+      DiagnosticType.warning(\"JSC_TYPE_PARSE_ERROR\", \"{0}\");\n+\n   // A special-cased error, so that it can be configured via the\n   // warnings API.\n   static final DiagnosticType EXTRA_FILEOVERVIEW \u003d\n@@ -53,7 +56,7 @@\n     DiagnosticType.warning(\"JSC_BAD_JSDOC_ANNOTATION\", \"Parse error. {0}\");\n \n   // A map of Rhino messages to their DiagnosticType.\n-  private final Map\u003cString, DiagnosticType\u003e typeMap;\n+  private final Map\u003cPattern, DiagnosticType\u003e typeMap;\n \n   private final AbstractCompiler compiler;\n \n@@ -62,9 +65,9 @@\n    * holder {0} with a wild card that matches all possible strings.\n    * Also put the any non-place-holder in quotes for regex matching later.\n    */\n-  private String replacePlaceHolders(String s) {\n+  private Pattern replacePlaceHolders(String s) {\n     s \u003d Pattern.quote(s);\n-    return s.replaceAll(\"\\\\{\\\\d+\\\\}\", \"\\\\\\\\E.*\\\\\\\\Q\");\n+    return Pattern.compile(s.replaceAll(\"\\\\{\\\\d+\\\\}\", \"\\\\\\\\E.*\\\\\\\\Q\"));\n   }\n \n   private RhinoErrorReporter(AbstractCompiler compiler) {\n@@ -90,7 +93,11 @@\n \n         // Unknown @annotations.\n         replacePlaceHolders(ScriptRuntime.getMessage0(\"msg.bad.jsdoc.tag\")),\n-        BAD_JSDOC_ANNOTATION);\n+        BAD_JSDOC_ANNOTATION,\n+\n+        // Type annotation errors.\n+        Pattern.compile(\"^Bad type annotation.*\"),\n+        TYPE_PARSE_ERROR);\n   }\n \n   public static com.google.javascript.jscomp.mozilla.rhino.ErrorReporter\n@@ -119,8 +126,8 @@\n \n     // Try to see if the message is one of the rhino errors we want to\n     // expose as DiagnosticType by matching it with the regex key.\n-    for (Entry\u003cString, DiagnosticType\u003e entry : typeMap.entrySet()) {\n-      if (message.matches(entry.getKey())) {\n+    for (Entry\u003cPattern, DiagnosticType\u003e entry : typeMap.entrySet()) {\n+      if (entry.getKey().matcher(message).matches()) {\n         return JSError.make(\n             sourceName, line, lineOffset, entry.getValue(), message);\n       }\n",
      "operations": [
        {
          "type": "insert-tree",
          "from": "",
          "to": "FieldDeclaration [1258,1365]"
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "MethodInvocation [2591,2650]"
        },
        {
          "type": "insert-tree",
          "from": "",
          "to": "METHOD_INVOCATION_RECEIVER [2591,2598]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "SimpleName: compile [2599,2606]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "METHOD_INVOCATION_ARGUMENTS [2607,2649]"
        },
        {
          "type": "move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "insert-tree",
          "from": "",
          "to": "MethodInvocation [3529,3570]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "SimpleName: TYPE_PARSE_ERROR [3580,3596]"
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "MethodInvocation [4668,4699]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "METHOD_INVOCATION_RECEIVER [4668,4682]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "SimpleName: matcher [4683,4690]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "METHOD_INVOCATION_ARGUMENTS [4691,4698]"
        },
        {
          "type": "move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "delete-node",
          "from": "METHOD_INVOCATION_ARGUMENTS [4440,4454]",
          "to": ""
        }
      ]
    },
    {
      "changed_type": "UPDATE",
      "changed_class": [
        "src/com/google/javascript/jscomp/TypeCheck.java",
        "src/com/google/javascript/jscomp/TypeCheck.java"
      ],
      "changed_functions": [
        {
          "qualified_names": [],
          "num": 0
        },
        {
          "qualified_names": [],
          "num": 0
        }
      ],
      "changed_lines": [
        {
          "qualified_names": [
            "240"
          ],
          "num": 1
        },
        {
          "qualified_names": [
            "241"
          ],
          "num": 1
        }
      ],
      "diff": "diff --git a/src/com/google/javascript/jscomp/TypeCheck.java b/src/com/google/javascript/jscomp/TypeCheck.java\nindex 41b94e0..fb0167f 100644\n--- a/src/com/google/javascript/jscomp/TypeCheck.java\n+++ b/src/com/google/javascript/jscomp/TypeCheck.java\n@@ -238,6 +238,7 @@\n       UNRESOLVED_TYPE,\n       WRONG_ARGUMENT_COUNT,\n       ILLEGAL_IMPLICIT_CAST,\n+      RhinoErrorReporter.TYPE_PARSE_ERROR,\n       TypedScopeCreator.UNKNOWN_LENDS,\n       TypedScopeCreator.LENDS_ON_NON_OBJECT,\n       TypedScopeCreator.CTOR_INITIALIZER,\n",
      "operations": [
        {
          "type": "insert-node",
          "from": "",
          "to": "QualifiedName: RhinoErrorReporter.TYPE_PARSE_ERROR [9024,9059]"
        }
      ]
    },
    {
      "changed_type": "UPDATE",
      "changed_class": [
        "src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java",
        "src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java"
      ],
      "changed_functions": [
        {
          "qualified_names": [
            "parseSuppressTag",
            "reportTypeSyntaxWarning",
            "addWarning",
            "parse",
            "parseModifiesTag",
            "addWarning"
          ],
          "num": 6
        },
        {
          "qualified_names": [
            "reportTypeSyntaxWarning",
            "addTypeWarning",
            "parseModifiesTag",
            "parse",
            "parseSuppressTag",
            "addParserWarning",
            "addParserWarning",
            "addTypeWarning"
          ],
          "num": 8
        }
      ],
      "changed_lines": [
        {
          "qualified_names": [
            "56",
            "57",
            "61",
            "191",
            "204",
            "217",
            "226",
            "229",
            "238",
            "258",
            "261",
            "270",
            "301",
            "338",
            "346",
            "354",
            "362",
            "396",
            "403",
            "410",
            "415",
            "419",
            "426",
            "444",
            "448",
            "453",
            "465",
            "472",
            "480",
            "488",
            "501",
            "579",
            "613",
            "616",
            "649",
            "657",
            "665",
            "673",
            "681",
            "689",
            "701",
            "713",
            "734",
            "738",
            "750",
            "754",
            "790",
            "797",
            "826",
            "833",
            "840",
            "864",
            "904",
            "911",
            "924",
            "929",
            "951",
            "958",
            "971",
            "976",
            "2103"
          ],
          "num": 61
        },
        {
          "qualified_names": [
            "56",
            "57",
            "61",
            "62",
            "66",
            "67",
            "68",
            "69",
            "70",
            "71",
            "72",
            "73",
            "74",
            "75",
            "76",
            "77",
            "78",
            "79",
            "80",
            "207",
            "220",
            "233",
            "242",
            "245",
            "254",
            "274",
            "277",
            "286",
            "317",
            "354",
            "362",
            "370",
            "378",
            "412",
            "419",
            "426",
            "431",
            "435",
            "442",
            "460",
            "464",
            "469",
            "481",
            "488",
            "496",
            "504",
            "517",
            "595",
            "629",
            "632",
            "665",
            "673",
            "681",
            "689",
            "697",
            "705",
            "717",
            "729",
            "750",
            "754",
            "766",
            "770",
            "806",
            "813",
            "842",
            "849",
            "856",
            "880",
            "920",
            "927",
            "940",
            "945",
            "967",
            "974",
            "987",
            "992",
            "2119"
          ],
          "num": 77
        }
      ],
      "diff": "diff --git a/src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java b/src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java\nindex e295abd..5fd99d5 100644\n--- a/src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java\n+++ b/src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java\n@@ -53,15 +53,31 @@\n   private final Node templateNode;\n \n   private class ErrorReporterParser {\n-    void addWarning(String messageId, String messageArg, int lineno,\n-                    int charno) {\n+    void addParserWarning(String messageId, String messageArg, int lineno,\n+        int charno) {\n       errorReporter.warning(ScriptRuntime.getMessage1(messageId, messageArg),\n           sourceName, lineno, null, charno);\n     }\n-    void addWarning(String messageId, int lineno, int charno) {\n+\n+    void addParserWarning(String messageId, int lineno, int charno) {\n       errorReporter.warning(ScriptRuntime.getMessage0(messageId),\n           sourceName, lineno, null, charno);\n     }\n+\n+    void addTypeWarning(String messageId, String messageArg, int lineno,\n+                    int charno) {\n+      errorReporter.warning(\n+          \"Bad type annotation. \" +\n+          ScriptRuntime.getMessage1(messageId, messageArg),\n+          sourceName, lineno, null, charno);\n+    }\n+\n+    void addTypeWarning(String messageId, int lineno, int charno) {\n+      errorReporter.warning(\n+          \"Bad type annotation. \" +\n+          ScriptRuntime.getMessage0(messageId),\n+          sourceName, lineno, null, charno);\n+    }\n   }\n \n   // The DocInfo with the fileoverview tag for the whole file.\n@@ -188,7 +204,7 @@\n             String annotationName \u003d stream.getString();\n             Annotation annotation \u003d annotationNames.get(annotationName);\n             if (annotation \u003d\u003d null) {\n-              parser.addWarning(\"msg.bad.jsdoc.tag\", annotationName,\n+              parser.addParserWarning(\"msg.bad.jsdoc.tag\", annotationName,\n                   stream.getLineno(), stream.getCharno());\n             } else {\n               // Mark the beginning of the annotation.\n@@ -201,7 +217,7 @@\n                     String author \u003d authorInfo.string;\n \n                     if (author.length() \u003d\u003d 0) {\n-                      parser.addWarning(\"msg.jsdoc.authormissing\",\n+                      parser.addParserWarning(\"msg.jsdoc.authormissing\",\n                           stream.getLineno(), stream.getCharno());\n                     } else {\n                       jsdocBuilder.addAuthor(author);\n@@ -214,7 +230,7 @@\n \n                 case CONSTANT:\n                   if (!jsdocBuilder.recordConstancy()) {\n-                    parser.addWarning(\"msg.jsdoc.const\",\n+                    parser.addParserWarning(\"msg.jsdoc.const\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -223,10 +239,10 @@\n                 case CONSTRUCTOR:\n                   if (!jsdocBuilder.recordConstructor()) {\n                     if (jsdocBuilder.isInterfaceRecorded()) {\n-                      parser.addWarning(\"msg.jsdoc.interface.constructor\",\n+                      parser.addTypeWarning(\"msg.jsdoc.interface.constructor\",\n                           stream.getLineno(), stream.getCharno());\n                     } else {\n-                      parser.addWarning(\"msg.jsdoc.incompat.type\",\n+                      parser.addTypeWarning(\"msg.jsdoc.incompat.type\",\n                           stream.getLineno(), stream.getCharno());\n                     }\n                   }\n@@ -235,7 +251,7 @@\n \n                 case DEPRECATED:\n                   if (!jsdocBuilder.recordDeprecated()) {\n-                    parser.addWarning(\"msg.jsdoc.deprecated\",\n+                    parser.addParserWarning(\"msg.jsdoc.deprecated\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n \n@@ -255,10 +271,10 @@\n                 case INTERFACE:\n                   if (!jsdocBuilder.recordInterface()) {\n                     if (jsdocBuilder.isConstructorRecorded()) {\n-                      parser.addWarning(\"msg.jsdoc.interface.constructor\",\n+                      parser.addTypeWarning(\"msg.jsdoc.interface.constructor\",\n                           stream.getLineno(), stream.getCharno());\n                     } else {\n-                      parser.addWarning(\"msg.jsdoc.incompat.type\",\n+                      parser.addTypeWarning(\"msg.jsdoc.incompat.type\",\n                           stream.getLineno(), stream.getCharno());\n                     }\n                   }\n@@ -267,7 +283,7 @@\n \n                 case DESC:\n                   if (jsdocBuilder.isDescriptionRecorded()) {\n-                    parser.addWarning(\"msg.jsdoc.desc.extra\",\n+                    parser.addParserWarning(\"msg.jsdoc.desc.extra\",\n                         stream.getLineno(), stream.getCharno());\n                     token \u003d eatTokensUntilEOL();\n                     continue retry;\n@@ -298,7 +314,7 @@\n \n                   if (!jsdocBuilder.recordFileOverview(fileOverview) ||\n                       fileOverviewJSDocInfo !\u003d null) {\n-                    parser.addWarning(\"msg.jsdoc.fileoverview.extra\",\n+                    parser.addParserWarning(\"msg.jsdoc.fileoverview.extra\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   continue retry;\n@@ -335,7 +351,7 @@\n                     type \u003d createJSTypeExpression(newStringNode(\"number\"));\n                   }\n                   if (!jsdocBuilder.recordEnumParameterType(type)) {\n-                    parser.addWarning(\n+                    parser.addTypeWarning(\n                         \"msg.jsdoc.incompat.type\", lineno, charno);\n                   }\n                   token \u003d eatTokensUntilEOL(token);\n@@ -343,7 +359,7 @@\n \n                 case EXPORT:\n                   if (!jsdocBuilder.recordExport()) {\n-                    parser.addWarning(\"msg.jsdoc.export\",\n+                    parser.addParserWarning(\"msg.jsdoc.export\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -351,7 +367,7 @@\n \n                 case EXTERNS:\n                   if (!jsdocBuilder.recordExterns()) {\n-                    parser.addWarning(\"msg.jsdoc.externs\",\n+                    parser.addParserWarning(\"msg.jsdoc.externs\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -359,7 +375,7 @@\n \n                 case JAVA_DISPATCH:\n                   if (!jsdocBuilder.recordJavaDispatch()) {\n-                    parser.addWarning(\"msg.jsdoc.javadispatch\",\n+                    parser.addParserWarning(\"msg.jsdoc.javadispatch\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -393,37 +409,37 @@\n \n                     if (annotation \u003d\u003d Annotation.EXTENDS) {\n                       if (!jsdocBuilder.recordBaseType(type)) {\n-                        parser.addWarning(\n+                        parser.addTypeWarning(\n                             \"msg.jsdoc.incompat.type\", lineno, charno);\n                       }\n                     } else {\n                       Preconditions.checkState(\n                           annotation \u003d\u003d Annotation.IMPLEMENTS);\n                       if (!jsdocBuilder.recordImplementedInterface(type)) {\n-                        parser.addWarning(\"msg.jsdoc.implements.duplicate\",\n+                        parser.addTypeWarning(\"msg.jsdoc.implements.duplicate\",\n                             lineno, charno);\n                       }\n                     }\n                     token \u003d next();\n                     if (matchingRc) {\n                       if (token !\u003d JsDocToken.RC) {\n-                        parser.addWarning(\"msg.jsdoc.missing.rc\",\n+                        parser.addTypeWarning(\"msg.jsdoc.missing.rc\",\n                             stream.getLineno(), stream.getCharno());\n                       }\n                     } else if (token !\u003d JsDocToken.EOL \u0026\u0026\n                         token !\u003d JsDocToken.EOF \u0026\u0026 token !\u003d JsDocToken.EOC) {\n-                      parser.addWarning(\"msg.end.annotation.expected\",\n+                      parser.addTypeWarning(\"msg.end.annotation.expected\",\n                           stream.getLineno(), stream.getCharno());\n                     }\n                   } else {\n-                    parser.addWarning(\"msg.no.type.name\", lineno, charno);\n+                    parser.addTypeWarning(\"msg.no.type.name\", lineno, charno);\n                   }\n                   token \u003d eatTokensUntilEOL(token);\n                   continue retry;\n \n                 case HIDDEN:\n                   if (!jsdocBuilder.recordHiddenness()) {\n-                    parser.addWarning(\"msg.jsdoc.hidden\",\n+                    parser.addParserWarning(\"msg.jsdoc.hidden\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -441,16 +457,16 @@\n                   if (match(JsDocToken.STRING)) {\n                     token \u003d next();\n                     if (!jsdocBuilder.recordLends(stream.getString())) {\n-                      parser.addWarning(\"msg.jsdoc.lends.incompatible\",\n+                      parser.addTypeWarning(\"msg.jsdoc.lends.incompatible\",\n                           stream.getLineno(), stream.getCharno());\n                     }\n                   } else {\n-                    parser.addWarning(\"msg.jsdoc.lends.missing\",\n+                    parser.addTypeWarning(\"msg.jsdoc.lends.missing\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n \n                   if (matchingRc \u0026\u0026 !match(JsDocToken.RC)) {\n-                    parser.addWarning(\"msg.jsdoc.missing.rc\",\n+                    parser.addTypeWarning(\"msg.jsdoc.missing.rc\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -462,14 +478,14 @@\n                   String meaning \u003d meaningInfo.string;\n                   token \u003d meaningInfo.token;\n                   if (!jsdocBuilder.recordMeaning(meaning)) {\n-                    parser.addWarning(\"msg.jsdoc.meaning.extra\",\n+                    parser.addParserWarning(\"msg.jsdoc.meaning.extra\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   continue retry;\n \n                 case NO_ALIAS:\n                   if (!jsdocBuilder.recordNoAlias()) {\n-                    parser.addWarning(\"msg.jsdoc.noalias\",\n+                    parser.addParserWarning(\"msg.jsdoc.noalias\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -477,7 +493,7 @@\n \n                 case NO_COMPILE:\n                   if (!jsdocBuilder.recordNoCompile()) {\n-                    parser.addWarning(\"msg.jsdoc.nocompile\",\n+                    parser.addParserWarning(\"msg.jsdoc.nocompile\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -485,7 +501,7 @@\n \n                 case NO_TYPE_CHECK:\n                   if (!jsdocBuilder.recordNoTypeCheck()) {\n-                    parser.addWarning(\"msg.jsdoc.nocheck\",\n+                    parser.addParserWarning(\"msg.jsdoc.nocheck\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -498,7 +514,7 @@\n                 case INHERIT_DOC:\n                 case OVERRIDE:\n                   if (!jsdocBuilder.recordOverride()) {\n-                    parser.addWarning(\"msg.jsdoc.override\",\n+                    parser.addTypeWarning(\"msg.jsdoc.override\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -576,7 +592,7 @@\n                   }\n \n                   if (JsDocToken.STRING !\u003d token) {\n-                    parser.addWarning(\"msg.missing.variable.name\",\n+                    parser.addTypeWarning(\"msg.missing.variable.name\",\n                         lineno, charno);\n                   } else {\n                     name \u003d stream.getString();\n@@ -610,10 +626,10 @@\n                       name \u003d null;\n                     } else if (!jsdocBuilder.recordParameter(name, type)) {\n                       if (jsdocBuilder.hasParameter(name)) {\n-                        parser.addWarning(\"msg.dup.variable.name\", name,\n+                        parser.addTypeWarning(\"msg.dup.variable.name\", name,\n                             lineno, charno);\n                       } else {\n-                        parser.addWarning(\"msg.jsdoc.incompat.type\", name,\n+                        parser.addTypeWarning(\"msg.jsdoc.incompat.type\", name,\n                             lineno, charno);\n                       }\n                     }\n@@ -646,7 +662,7 @@\n \n                 case PRESERVE_TRY:\n                   if (!jsdocBuilder.recordPreserveTry()) {\n-                    parser.addWarning(\"msg.jsdoc.preservertry\",\n+                    parser.addParserWarning(\"msg.jsdoc.preservertry\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -654,7 +670,7 @@\n \n                 case PRIVATE:\n                   if (!jsdocBuilder.recordVisibility(Visibility.PRIVATE)) {\n-                    parser.addWarning(\"msg.jsdoc.visibility.private\",\n+                    parser.addParserWarning(\"msg.jsdoc.visibility.private\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -662,7 +678,7 @@\n \n                 case PROTECTED:\n                   if (!jsdocBuilder.recordVisibility(Visibility.PROTECTED)) {\n-                    parser.addWarning(\"msg.jsdoc.visibility.protected\",\n+                    parser.addParserWarning(\"msg.jsdoc.visibility.protected\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -670,7 +686,7 @@\n \n                 case PUBLIC:\n                   if (!jsdocBuilder.recordVisibility(Visibility.PUBLIC)) {\n-                    parser.addWarning(\"msg.jsdoc.visibility.public\",\n+                    parser.addParserWarning(\"msg.jsdoc.visibility.public\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -678,7 +694,7 @@\n \n                 case NO_SHADOW:\n                   if (!jsdocBuilder.recordNoShadow()) {\n-                    parser.addWarning(\"msg.jsdoc.noshadow\",\n+                    parser.addParserWarning(\"msg.jsdoc.noshadow\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -686,7 +702,7 @@\n \n                 case NO_SIDE_EFFECTS:\n                   if (!jsdocBuilder.recordNoSideEffects()) {\n-                    parser.addWarning(\"msg.jsdoc.nosideeffects\",\n+                    parser.addParserWarning(\"msg.jsdoc.nosideeffects\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -698,7 +714,7 @@\n \n                 case IMPLICIT_CAST:\n                   if (!jsdocBuilder.recordImplicitCast()) {\n-                    parser.addWarning(\"msg.jsdoc.implicitcast\",\n+                    parser.addTypeWarning(\"msg.jsdoc.implicitcast\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n                   token \u003d eatTokensUntilEOL();\n@@ -710,7 +726,7 @@\n                     String reference \u003d referenceInfo.string;\n \n                     if (reference.length() \u003d\u003d 0) {\n-                      parser.addWarning(\"msg.jsdoc.seemissing\",\n+                      parser.addParserWarning(\"msg.jsdoc.seemissing\",\n                           stream.getLineno(), stream.getCharno());\n                     } else {\n                       jsdocBuilder.addReference(reference);\n@@ -731,11 +747,11 @@\n                   String templateTypeName \u003d templateInfo.string;\n \n                   if (templateTypeName.length() \u003d\u003d 0) {\n-                    parser.addWarning(\"msg.jsdoc.templatemissing\",\n+                    parser.addTypeWarning(\"msg.jsdoc.templatemissing\",\n                           stream.getLineno(), stream.getCharno());\n                   } else if (!jsdocBuilder.recordTemplateTypeName(\n                       templateTypeName)) {\n-                    parser.addWarning(\"msg.jsdoc.template.at.most.once\",\n+                    parser.addTypeWarning(\"msg.jsdoc.template.at.most.once\",\n                         stream.getLineno(), stream.getCharno());\n                   }\n \n@@ -747,11 +763,11 @@\n                   String version \u003d versionInfo.string;\n \n                   if (version.length() \u003d\u003d 0) {\n-                    parser.addWarning(\"msg.jsdoc.versionmissing\",\n+                    parser.addParserWarning(\"msg.jsdoc.versionmissing\",\n                           stream.getLineno(), stream.getCharno());\n                   } else {\n                     if (!jsdocBuilder.recordVersion(version)) {\n-                       parser.addWarning(\"msg.jsdoc.extraversion\",\n+                       parser.addParserWarning(\"msg.jsdoc.extraversion\",\n                           stream.getLineno(), stream.getCharno());\n                     }\n                   }\n@@ -787,14 +803,14 @@\n                     switch (annotation) {\n                       case DEFINE:\n                         if (!jsdocBuilder.recordDefineType(type)) {\n-                          parser.addWarning(\"msg.jsdoc.define\",\n+                          parser.addParserWarning(\"msg.jsdoc.define\",\n                               lineno, charno);\n                         }\n                         break;\n \n                       case RETURN:\n                         if (!jsdocBuilder.recordReturnType(type)) {\n-                          parser.addWarning(\n+                          parser.addTypeWarning(\n                               \"msg.jsdoc.incompat.type\", lineno, charno);\n                           break;\n                         }\n@@ -823,21 +839,21 @@\n \n                       case THIS:\n                         if (!jsdocBuilder.recordThisType(type)) {\n-                          parser.addWarning(\n+                          parser.addTypeWarning(\n                               \"msg.jsdoc.incompat.type\", lineno, charno);\n                         }\n                         break;\n \n                       case TYPE:\n                         if (!jsdocBuilder.recordType(type)) {\n-                          parser.addWarning(\n+                          parser.addTypeWarning(\n                               \"msg.jsdoc.incompat.type\", lineno, charno);\n                         }\n                         break;\n \n                       case TYPEDEF:\n                         if (!jsdocBuilder.recordTypedef(type)) {\n-                          parser.addWarning(\n+                          parser.addTypeWarning(\n                               \"msg.jsdoc.incompat.type\", lineno, charno);\n                         }\n                         break;\n@@ -861,7 +877,7 @@\n         case EOF:\n           // discard any accumulated information\n           jsdocBuilder.build(null);\n-          parser.addWarning(\"msg.unexpected.eof\",\n+          parser.addParserWarning(\"msg.unexpected.eof\",\n               stream.getLineno(), stream.getCharno());\n           return false;\n \n@@ -901,14 +917,14 @@\n         if (match(JsDocToken.STRING)) {\n           String name \u003d stream.getString();\n           if (!suppressionNames.contains(name)) {\n-            parser.addWarning(\"msg.jsdoc.suppress.unknown\", name,\n+            parser.addParserWarning(\"msg.jsdoc.suppress.unknown\", name,\n                 stream.getLineno(), stream.getCharno());\n           }\n \n           suppressions.add(stream.getString());\n           token \u003d next();\n         } else {\n-          parser.addWarning(\"msg.jsdoc.suppress\",\n+          parser.addParserWarning(\"msg.jsdoc.suppress\",\n               stream.getLineno(), stream.getCharno());\n           return token;\n         }\n@@ -921,12 +937,12 @@\n       }\n \n       if (!match(JsDocToken.RC)) {\n-        parser.addWarning(\"msg.jsdoc.suppress\",\n+        parser.addParserWarning(\"msg.jsdoc.suppress\",\n             stream.getLineno(), stream.getCharno());\n       } else {\n         token \u003d next();\n         if (!jsdocBuilder.recordSuppressions(suppressions)) {\n-          parser.addWarning(\"msg.jsdoc.suppress.duplicate\",\n+          parser.addParserWarning(\"msg.jsdoc.suppress.duplicate\",\n               stream.getLineno(), stream.getCharno());\n         }\n       }\n@@ -948,14 +964,14 @@\n           String name \u003d stream.getString();\n           if (!modifiesAnnotationKeywords.contains(name)\n               \u0026\u0026 !jsdocBuilder.hasParameter(name)) {\n-              parser.addWarning(\"msg.jsdoc.modifies.unknown\", name,\n+              parser.addParserWarning(\"msg.jsdoc.modifies.unknown\", name,\n                   stream.getLineno(), stream.getCharno());\n           }\n \n           modifies.add(stream.getString());\n           token \u003d next();\n         } else {\n-          parser.addWarning(\"msg.jsdoc.modifies\",\n+          parser.addParserWarning(\"msg.jsdoc.modifies\",\n               stream.getLineno(), stream.getCharno());\n           return token;\n         }\n@@ -968,12 +984,12 @@\n       }\n \n       if (!match(JsDocToken.RC)) {\n-        parser.addWarning(\"msg.jsdoc.modifies\",\n+        parser.addParserWarning(\"msg.jsdoc.modifies\",\n             stream.getLineno(), stream.getCharno());\n       } else {\n         token \u003d next();\n         if (!jsdocBuilder.recordModifies(modifies)) {\n-          parser.addWarning(\"msg.jsdoc.modifies.duplicate\",\n+          parser.addParserWarning(\"msg.jsdoc.modifies.duplicate\",\n               stream.getLineno(), stream.getCharno());\n         }\n       }\n@@ -2100,7 +2116,7 @@\n   }\n \n   private Node reportTypeSyntaxWarning(String warning) {\n-    parser.addWarning(warning, stream.getLineno(), stream.getCharno());\n+    parser.addTypeWarning(warning, stream.getLineno(), stream.getCharno());\n     return null;\n   }\n \n",
      "operations": [
        {
          "type": "insert-tree",
          "from": "",
          "to": "MethodDeclaration [2477,2755]"
        },
        {
          "type": "insert-tree",
          "from": "",
          "to": "MethodDeclaration [2761,2988]"
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "insert-tree",
          "from": "",
          "to": "MethodInvocation [33813,33831]"
        },
        {
          "type": "insert-tree",
          "from": "",
          "to": "MethodInvocation [33833,33851]"
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "insert-tree",
          "from": "",
          "to": "MethodInvocation [16251,16269]"
        },
        {
          "type": "insert-tree",
          "from": "",
          "to": "MethodInvocation [16271,16289]"
        },
        {
          "type": "update-node",
          "from": "",
          "to": ""
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "SimpleName: name [24026,24030]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "SimpleName: lineno [24060,24066]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "SimpleName: charno [24068,24074]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "SimpleName: name [24181,24185]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "SimpleName: lineno [24215,24221]"
        },
        {
          "type": "insert-node",
          "from": "",
          "to": "SimpleName: charno [24223,24229]"
        },
        {
          "type": "delete-node",
          "from": "SimpleName: lineno [32170,32176]",
          "to": ""
        },
        {
          "type": "delete-node",
          "from": "SimpleName: charno [32178,32184]",
          "to": ""
        },
        {
          "type": "delete-tree",
          "from": "MethodInvocation [15643,15661]",
          "to": ""
        },
        {
          "type": "delete-tree",
          "from": "MethodInvocation [15663,15681]",
          "to": ""
        },
        {
          "type": "delete-node",
          "from": "SimpleName: name [23360,23364]",
          "to": ""
        },
        {
          "type": "delete-node",
          "from": "SimpleName: name [23511,23515]",
          "to": ""
        },
        {
          "type": "delete-node",
          "from": "SimpleName: lineno [32448,32454]",
          "to": ""
        },
        {
          "type": "delete-node",
          "from": "SimpleName: charno [32456,32462]",
          "to": ""
        },
        {
          "type": "delete-tree",
          "from": "ExpressionStatement [32995,33089]",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        },
        {
          "type": "multi-move-tree",
          "from": "",
          "to": ""
        }
      ]
    },
    {
      "changed_type": "UPDATE",
      "changed_class": [
        "src/com/google/javascript/rhino/jstype/NamedType.java",
        "src/com/google/javascript/rhino/jstype/NamedType.java"
      ],
      "changed_functions": [
        {
          "qualified_names": [
            "handleUnresolvedType"
          ],
          "num": 1
        },
        {
          "qualified_names": [
            "handleUnresolvedType"
          ],
          "num": 1
        }
      ],
      "changed_lines": [
        {
          "qualified_names": [
            "375",
            "376"
          ],
          "num": 2
        },
        {
          "qualified_names": [
            "375",
            "376"
          ],
          "num": 2
        }
      ],
      "diff": "diff --git a/src/com/google/javascript/rhino/jstype/NamedType.java b/src/com/google/javascript/rhino/jstype/NamedType.java\nindex 9775653..ba8421a 100644\n--- a/src/com/google/javascript/rhino/jstype/NamedType.java\n+++ b/src/com/google/javascript/rhino/jstype/NamedType.java\n@@ -372,8 +372,8 @@\n           registry.isForwardDeclaredType(reference);\n       boolean beForgiving \u003d forgiving || isForwardDeclared;\n       if (!beForgiving \u0026\u0026 registry.isLastGeneration()) {\n-        t.warning(\"Unknown type \" + reference, sourceName, lineno, null,\n-            charno);\n+        t.warning(\"Bad type annotation. Unknown type \" + reference,\n+            sourceName, lineno, null, charno);\n       } else {\n         if (isForwardDeclared) {\n           setReferencedType(\n",
      "operations": [
        {
          "type": "update-node",
          "from": "",
          "to": ""
        }
      ]
    }
  ],
  "inducing_type": {
    "add_classes": {
      "qualified_names": [],
      "num": 0
    },
    "delete_classes": {
      "qualified_names": [],
      "num": 0
    },
    "add_functions": {
      "qualified_names": [
        "addTypeWarning",
        "addParserWarning"
      ],
      "num": 2
    },
    "delete_functions": {
      "qualified_names": [
        "addWarning"
      ],
      "num": 1
    }
  },
  "trigger_tests": [
    {
      "test_class": "com.google.javascript.jscomp.parsing.JsDocInfoParserTest",
      "test_function": "testIssue477",
      "exception": "junit.framework.ComparisonFailure",
      "message": "expected:\u003c[Bad type annotation. ]missing opening (\u003e but was:\u003c[]missing opening (\u003e"
    }
  ],
  "fixing_changes": [],
  "fixing_type": {
    "add_classes": {
      "qualified_names": [],
      "num": 0
    },
    "delete_classes": {
      "qualified_names": [],
      "num": 0
    },
    "add_functions": {
      "qualified_names": [],
      "num": 0
    },
    "delete_functions": {
      "qualified_names": [],
      "num": 0
    }
  }
}