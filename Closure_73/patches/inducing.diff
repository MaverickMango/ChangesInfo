diff --git a/build.xml b/build.xml
index 8a0a65e..796296a 100644
--- a/build.xml
+++ b/build.xml
@@ -124,7 +124,7 @@
   <target name="test"
           depends="compile-tests"
           description="compile and execute JUnit tests">
-    <junit>
+    <junit printsummary="on" fork="true" forkmode="once" showoutput="true">
       <classpath refid="classpath.path" />
       <classpath>
         <pathelement location="${build.dir}/test" />
diff --git a/javadoc/com/google/javascript/jscomp/AbstractCompilerRunner.html b/javadoc/com/google/javascript/jscomp/AbstractCompilerRunner.html
index 3a770e8..8a123c8 100644
--- a/javadoc/com/google/javascript/jscomp/AbstractCompilerRunner.html
+++ b/javadoc/com/google/javascript/jscomp/AbstractCompilerRunner.html
@@ -817,12 +817,14 @@
 setRunOptions</H3>
 <PRE>
 protected final void <B>setRunOptions</B>(<A HREF="../../../../com/google/javascript/jscomp/AbstractCompilerRunner.html" title="type parameter in AbstractCompilerRunner">B</A>&nbsp;options)
-                            throws <A HREF="http://java.sun.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
+                            throws <A HREF="http://java.sun.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A>,
+                                   <A HREF="../../../../com/google/javascript/jscomp/AbstractCompilerRunner.FlagUsageException.html" title="class in com.google.javascript.jscomp">AbstractCompilerRunner.FlagUsageException</A></PRE>
 <DL>
 <DD><DL>
 
 <DT><B>Throws:</B>
-<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
+<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE>
+<DD><CODE><A HREF="../../../../com/google/javascript/jscomp/AbstractCompilerRunner.FlagUsageException.html" title="class in com.google.javascript.jscomp">AbstractCompilerRunner.FlagUsageException</A></CODE></DL>
 </DD>
 </DL>
 <HR>
diff --git a/javadoc/com/google/javascript/jscomp/CompilerOptions.html b/javadoc/com/google/javascript/jscomp/CompilerOptions.html
index 1ff540b..3ed0228 100644
--- a/javadoc/com/google/javascript/jscomp/CompilerOptions.html
+++ b/javadoc/com/google/javascript/jscomp/CompilerOptions.html
@@ -809,6 +809,14 @@
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A></CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/CompilerOptions.html#outputCharset">outputCharset</A></B></CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Charset to use when generating code.</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>&nbsp;boolean</CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/CompilerOptions.html#prettyPrint">prettyPrint</A></B></CODE>
 
@@ -2638,6 +2646,18 @@
 <DL>
 </DL>
 </DL>
+<HR>
+
+<A NAME="outputCharset"><!-- --></A><H3>
+outputCharset</H3>
+<PRE>
+public <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A> <B>outputCharset</B></PRE>
+<DL>
+<DD>Charset to use when generating code.  If null, then output ASCII.
+<P>
+<DL>
+</DL>
+</DL>
 
 <!-- ========= CONSTRUCTOR DETAIL ======== -->
 
diff --git a/javadoc/com/google/javascript/jscomp/JSSourceFile.html b/javadoc/com/google/javascript/jscomp/JSSourceFile.html
index 00f500b..9274d4d 100644
--- a/javadoc/com/google/javascript/jscomp/JSSourceFile.html
+++ b/javadoc/com/google/javascript/jscomp/JSSourceFile.html
@@ -163,6 +163,15 @@
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>static&nbsp;<A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A></CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html#fromFile(java.io.File, java.nio.charset.Charset)">fromFile</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</A>&nbsp;file,
+         <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A>&nbsp;charSet)</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>static&nbsp;<A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A></CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html#fromFile(java.lang.String)">fromFile</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;fileName)</CODE>
 
 <BR>
@@ -171,6 +180,15 @@
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>static&nbsp;<A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A></CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html#fromFile(java.lang.String, java.nio.charset.Charset)">fromFile</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;fileName,
+         <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A>&nbsp;charSet)</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>static&nbsp;<A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A></CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html#fromGenerator(java.lang.String, com.google.javascript.jscomp.SourceFile.Generator)">fromGenerator</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;fileName,
               <A HREF="../../../../com/google/javascript/jscomp/SourceFile.Generator.html" title="interface in com.google.javascript.jscomp">SourceFile.Generator</A>&nbsp;generator)</CODE>
 
@@ -226,6 +244,18 @@
 </TR>
 </TABLE>
 
+<A NAME="fromFile(java.lang.String, java.nio.charset.Charset)"><!-- --></A><H3>
+fromFile</H3>
+<PRE>
+public static <A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A> <B>fromFile</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;fileName,
+                                    <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A>&nbsp;charSet)</PRE>
+<DL>
+<DD><DL>
+</DL>
+</DD>
+</DL>
+<HR>
+
 <A NAME="fromFile(java.lang.String)"><!-- --></A><H3>
 fromFile</H3>
 <PRE>
@@ -237,6 +267,18 @@
 </DL>
 <HR>
 
+<A NAME="fromFile(java.io.File, java.nio.charset.Charset)"><!-- --></A><H3>
+fromFile</H3>
+<PRE>
+public static <A HREF="../../../../com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A> <B>fromFile</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</A>&nbsp;file,
+                                    <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A>&nbsp;charSet)</PRE>
+<DL>
+<DD><DL>
+</DL>
+</DD>
+</DL>
+<HR>
+
 <A NAME="fromFile(java.io.File)"><!-- --></A><H3>
 fromFile</H3>
 <PRE>
diff --git a/javadoc/com/google/javascript/jscomp/SourceFile.html b/javadoc/com/google/javascript/jscomp/SourceFile.html
index 45efce6..68f16c2 100644
--- a/javadoc/com/google/javascript/jscomp/SourceFile.html
+++ b/javadoc/com/google/javascript/jscomp/SourceFile.html
@@ -164,6 +164,15 @@
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>static&nbsp;<A HREF="../../../../com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A></CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/SourceFile.html#fromFile(java.io.File, java.nio.charset.Charset)">fromFile</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</A>&nbsp;file,
+         <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A>&nbsp;c)</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>static&nbsp;<A HREF="../../../../com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A></CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/SourceFile.html#fromFile(java.lang.String)">fromFile</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;fileName)</CODE>
 
 <BR>
@@ -172,6 +181,15 @@
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>static&nbsp;<A HREF="../../../../com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A></CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/SourceFile.html#fromFile(java.lang.String, java.nio.charset.Charset)">fromFile</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;fileName,
+         <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A>&nbsp;c)</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>static&nbsp;<A HREF="../../../../com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A></CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/SourceFile.html#fromGenerator(java.lang.String, com.google.javascript.jscomp.SourceFile.Generator)">fromGenerator</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;fileName,
               <A HREF="../../../../com/google/javascript/jscomp/SourceFile.Generator.html" title="interface in com.google.javascript.jscomp">SourceFile.Generator</A>&nbsp;generator)</CODE>
 
@@ -324,6 +342,18 @@
 </DL>
 <HR>
 
+<A NAME="fromFile(java.lang.String, java.nio.charset.Charset)"><!-- --></A><H3>
+fromFile</H3>
+<PRE>
+public static <A HREF="../../../../com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A> <B>fromFile</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;fileName,
+                                  <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A>&nbsp;c)</PRE>
+<DL>
+<DD><DL>
+</DL>
+</DD>
+</DL>
+<HR>
+
 <A NAME="fromFile(java.lang.String)"><!-- --></A><H3>
 fromFile</H3>
 <PRE>
@@ -335,6 +365,18 @@
 </DL>
 <HR>
 
+<A NAME="fromFile(java.io.File, java.nio.charset.Charset)"><!-- --></A><H3>
+fromFile</H3>
+<PRE>
+public static <A HREF="../../../../com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A> <B>fromFile</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</A>&nbsp;file,
+                                  <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A>&nbsp;c)</PRE>
+<DL>
+<DD><DL>
+</DL>
+</DD>
+</DL>
+<HR>
+
 <A NAME="fromFile(java.io.File)"><!-- --></A><H3>
 fromFile</H3>
 <PRE>
diff --git a/javadoc/com/google/javascript/rhino/FunctionNode.html b/javadoc/com/google/javascript/rhino/FunctionNode.html
index 64aed15..c5fef28 100644
--- a/javadoc/com/google/javascript/rhino/FunctionNode.html
+++ b/javadoc/com/google/javascript/rhino/FunctionNode.html
@@ -175,7 +175,7 @@
 <TH ALIGN="left"><B>Fields inherited from class com.google.javascript.rhino.<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A></B></TH>
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
-<TD><CODE><A HREF="../../../../com/google/javascript/rhino/Node.html#ATTRIBUTE_FLAG">ATTRIBUTE_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BOTH">BOTH</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BRACELESS_TYPE">BRACELESS_TYPE</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BREAK_PROP">BREAK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CASEARRAY_PROP">CASEARRAY_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CASES_PROP">CASES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CATCH_SCOPE_PROP">CATCH_SCOPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CODEOFFSET_PROP">CODEOFFSET_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#COLUMN_BITS">COLUMN_BITS</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#COLUMN_MASK">COLUMN_MASK</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CONTINUE_PROP">CONTINUE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DEBUGSOURCE_PROP">DEBUGSOURCE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DECR_FLAG">DECR_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DEFAULT_PROP">DEFAULT_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DESCENDANTS_FLAG">DESCENDANTS_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DIRECTCALL_PROP">DIRECTCALL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#EMPTY_BLOCK">EMPTY_BLOCK</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ENUM_PROP">ENUM_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FINALLY_PROP">FINALLY_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FIXUPS_PROP">FIXUPS_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FUNCTION_PROP">FUNCTION_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#INCRDECR_PROP">INCRDECR_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_CONSTANT_NAME">IS_CONSTANT_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_DISPATCHER">IS_DISPATCHER</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_NAMESPACE">IS_NAMESPACE</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_OPTIONAL_PARAM">IS_OPTIONAL_PARAM</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_VAR_ARGS_PARAM">IS_VAR_ARGS_PARAM</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ISNUMBER_PROP">ISNUMBER_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#JSDOC_INFO_PROP">JSDOC_INFO_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LABEL_ID_PROP">LABEL_ID_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LABEL_PROP">LABEL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LAST_PROP">LAST_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LASTUSE_PROP">LASTUSE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LEFT">LEFT</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCAL_BLOCK_PROP">LOCAL_BLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCAL_PROP">LOCAL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCALCOUNT_PROP">LOCALCOUNT_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#MAX_COLUMN_NUMBER">MAX_COLUMN_NUMBER</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#MEMBER_TYPE_PROP">MEMBER_TYPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NAME_PROP">NAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NO_SIDE_EFFECTS_CALL">NO_SIDE_EFFECTS_CALL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NON_SPECIALCALL">NON_SPECIALCALL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#OBJECT_IDS_PROP">OBJECT_IDS_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#OPT_ARG_NAME">OPT_ARG_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ORIGINALNAME_PROP">ORIGINALNAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#PARENTHESIZED_PROP">PARENTHESIZED_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#POST_FLAG">POST_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#PROPERTY_FLAG">PROPERTY_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#QUOTED_PROP">QUOTED_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#REGEXP_PROP">REGEXP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#RIGHT">RIGHT</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SKIP_INDEXES_PROP">SKIP_INDEXES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SOURCEFILE_PROP">SOURCEFILE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SOURCENAME_PROP">SOURCENAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIAL_PROP_PROP">SPECIAL_PROP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_EVAL">SPECIALCALL_EVAL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_PROP">SPECIALCALL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_WITH">SPECIALCALL_WITH</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SYNTHETIC_BLOCK_PROP">SYNTHETIC_BLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TARGET_PROP">TARGET_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TARGETBLOCK_PROP">TARGETBLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TEMP_PROP">TEMP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TYPE_PROP">TYPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#USES_PROP">USES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VAR_ARGS_NAME">VAR_ARGS_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VARIABLE_PROP">VARIABLE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VARS_PROP">VARS_PROP</A></CODE></TD>
+<TD><CODE><A HREF="../../../../com/google/javascript/rhino/Node.html#ATTRIBUTE_FLAG">ATTRIBUTE_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BOTH">BOTH</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BRACELESS_TYPE">BRACELESS_TYPE</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BREAK_PROP">BREAK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CASEARRAY_PROP">CASEARRAY_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CASES_PROP">CASES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CATCH_SCOPE_PROP">CATCH_SCOPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CODEOFFSET_PROP">CODEOFFSET_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#COLUMN_BITS">COLUMN_BITS</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#COLUMN_MASK">COLUMN_MASK</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CONTINUE_PROP">CONTINUE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DEBUGSOURCE_PROP">DEBUGSOURCE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DECR_FLAG">DECR_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DEFAULT_PROP">DEFAULT_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DESCENDANTS_FLAG">DESCENDANTS_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DIRECTCALL_PROP">DIRECTCALL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DIRECTIVES">DIRECTIVES</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#EMPTY_BLOCK">EMPTY_BLOCK</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ENUM_PROP">ENUM_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FINALLY_PROP">FINALLY_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FIXUPS_PROP">FIXUPS_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FUNCTION_PROP">FUNCTION_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#INCRDECR_PROP">INCRDECR_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_CONSTANT_NAME">IS_CONSTANT_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_DISPATCHER">IS_DISPATCHER</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_NAMESPACE">IS_NAMESPACE</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_OPTIONAL_PARAM">IS_OPTIONAL_PARAM</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_VAR_ARGS_PARAM">IS_VAR_ARGS_PARAM</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ISNUMBER_PROP">ISNUMBER_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#JSDOC_INFO_PROP">JSDOC_INFO_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LABEL_ID_PROP">LABEL_ID_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LABEL_PROP">LABEL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LAST_PROP">LAST_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LASTUSE_PROP">LASTUSE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LEFT">LEFT</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCAL_BLOCK_PROP">LOCAL_BLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCAL_PROP">LOCAL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCALCOUNT_PROP">LOCALCOUNT_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#MAX_COLUMN_NUMBER">MAX_COLUMN_NUMBER</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#MEMBER_TYPE_PROP">MEMBER_TYPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NAME_PROP">NAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NO_SIDE_EFFECTS_CALL">NO_SIDE_EFFECTS_CALL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NON_SPECIALCALL">NON_SPECIALCALL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#OBJECT_IDS_PROP">OBJECT_IDS_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#OPT_ARG_NAME">OPT_ARG_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ORIGINALNAME_PROP">ORIGINALNAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#PARENTHESIZED_PROP">PARENTHESIZED_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#POST_FLAG">POST_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#PROPERTY_FLAG">PROPERTY_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#QUOTED_PROP">QUOTED_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#REGEXP_PROP">REGEXP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#RIGHT">RIGHT</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SKIP_INDEXES_PROP">SKIP_INDEXES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SOURCEFILE_PROP">SOURCEFILE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SOURCENAME_PROP">SOURCENAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIAL_PROP_PROP">SPECIAL_PROP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_EVAL">SPECIALCALL_EVAL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_PROP">SPECIALCALL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_WITH">SPECIALCALL_WITH</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SYNTHETIC_BLOCK_PROP">SYNTHETIC_BLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TARGET_PROP">TARGET_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TARGETBLOCK_PROP">TARGETBLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TEMP_PROP">TEMP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TYPE_PROP">TYPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#USES_PROP">USES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VAR_ARGS_NAME">VAR_ARGS_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VARIABLE_PROP">VARIABLE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VARS_PROP">VARS_PROP</A></CODE></TD>
 </TR>
 </TABLE>
 &nbsp;
@@ -259,7 +259,7 @@
 <TH ALIGN="left"><B>Methods inherited from class com.google.javascript.rhino.<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A></B></TH>
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
-<TD><CODE><A HREF="../../../../com/google/javascript/rhino/Node.html#addChildAfter(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">addChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildBefore(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">addChildBefore</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildrenToBack(com.google.javascript.rhino.Node)">addChildrenToBack</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildrenToFront(com.google.javascript.rhino.Node)">addChildrenToFront</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildToBack(com.google.javascript.rhino.Node)">addChildToBack</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildToFront(com.google.javascript.rhino.Node)">addChildToFront</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#appendStringTree(java.lang.Appendable)">appendStringTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#checkTreeEquals(com.google.javascript.rhino.Node)">checkTreeEquals</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#checkTreeEqualsSilent(com.google.javascript.rhino.Node)">checkTreeEqualsSilent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#children()">children</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#cloneNode()">cloneNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#cloneTree()">cloneTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#copyInformationFrom(com.google.javascript.rhino.Node)">copyInformationFrom</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#detachChildren()">detachChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#detachFromParent()">detachFromParent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#extractCharno(int)">extractCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#extractLineno(int)">extractLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getAncestor(int)">getAncestor</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getAncestors()">getAncestors</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getBooleanProp(int)">getBooleanProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getCharno()">getCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildAtIndex(int)">getChildAtIndex</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildBefore(com.google.javascript.rhino.Node)">getChildBefore</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildCount()">getChildCount</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getDouble()">getDouble</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getExistingIntProp(int)">getExistingIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getFirstChild()">getFirstChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getIntProp(int, int)">getIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJsDocBuilderForNode()">getJsDocBuilderForNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJSDocInfo()">getJSDocInfo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJSType()">getJSType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLastChild()">getLastChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLastSibling()">getLastSibling</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLineno()">getLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getNext()">getNext</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getParent()">getParent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getProp(int)">getProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getQualifiedName()">getQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getString()">getString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getType()">getType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasChild(com.google.javascript.rhino.Node)">hasChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasChildren()">hasChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasMoreThanOneChild()">hasMoreThanOneChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasOneChild()">hasOneChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasSideEffects()">hasSideEffects</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isEquivalentTo(com.google.javascript.rhino.Node)">isEquivalentTo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isNoSideEffectsCall()">isNoSideEffectsCall</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isOptionalArg()">isOptionalArg</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isQualifiedName()">isQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isQuotedString()">isQuotedString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isSyntheticBlock()">isSyntheticBlock</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isUnscopedQualifiedName()">isUnscopedQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isVarArgs()">isVarArgs</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#mergeLineCharNo(int, int)">mergeLineCharNo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newNumber(double)">newNumber</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newNumber(double, int, int)">newNumber</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(int, java.lang.String)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(int, java.lang.String, int, int)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(java.lang.String)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(java.lang.String, int, int)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putBooleanProp(int, boolean)">putBooleanProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putIntProp(int, int)">putIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putProp(int, java.lang.Object)">putProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChild(com.google.javascript.rhino.Node)">removeChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChildAfter(com.google.javascript.rhino.Node)">removeChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChildren()">removeChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeFirstChild()">removeFirstChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeProp(int)">removeProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#replaceChild(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">replaceChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#replaceChildAfter(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">replaceChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setCharno(int)">setCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setDouble(double)">setDouble</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setIsNoSideEffectsCall()">setIsNoSideEffectsCall</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setIsSyntheticBlock(boolean)">setIsSyntheticBlock</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setJSDocInfo(com.google.javascript.rhino.JSDocInfo)">setJSDocInfo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setJSType(com.google.javascript.rhino.jstype.JSType)">setJSType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setLineno(int)">setLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setOptionalArg(boolean)">setOptionalArg</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setQuotedString()">setQuotedString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setString(java.lang.String)">setString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setType(int)">setType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setVarArgs(boolean)">setVarArgs</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setWasEmptyNode(boolean)">setWasEmptyNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#siblings()">siblings</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#tokenToName(int)">tokenToName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toString()">toString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toString(boolean, boolean, boolean)">toString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toStringTree()">toStringTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#wasEmptyNode()">wasEmptyNode</A></CODE></TD>
+<TD><CODE><A HREF="../../../../com/google/javascript/rhino/Node.html#addChildAfter(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">addChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildBefore(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">addChildBefore</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildrenToBack(com.google.javascript.rhino.Node)">addChildrenToBack</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildrenToFront(com.google.javascript.rhino.Node)">addChildrenToFront</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildToBack(com.google.javascript.rhino.Node)">addChildToBack</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildToFront(com.google.javascript.rhino.Node)">addChildToFront</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#appendStringTree(java.lang.Appendable)">appendStringTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#checkTreeEquals(com.google.javascript.rhino.Node)">checkTreeEquals</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#checkTreeEqualsSilent(com.google.javascript.rhino.Node)">checkTreeEqualsSilent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#children()">children</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#cloneNode()">cloneNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#cloneTree()">cloneTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#copyInformationFrom(com.google.javascript.rhino.Node)">copyInformationFrom</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#detachChildren()">detachChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#detachFromParent()">detachFromParent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#extractCharno(int)">extractCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#extractLineno(int)">extractLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getAncestor(int)">getAncestor</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getAncestors()">getAncestors</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getBooleanProp(int)">getBooleanProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getCharno()">getCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildAtIndex(int)">getChildAtIndex</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildBefore(com.google.javascript.rhino.Node)">getChildBefore</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildCount()">getChildCount</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getDirectives()">getDirectives</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getDouble()">getDouble</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getExistingIntProp(int)">getExistingIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getFirstChild()">getFirstChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getIntProp(int, int)">getIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJsDocBuilderForNode()">getJsDocBuilderForNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJSDocInfo()">getJSDocInfo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJSType()">getJSType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLastChild()">getLastChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLastSibling()">getLastSibling</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLineno()">getLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getNext()">getNext</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getParent()">getParent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getProp(int)">getProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getQualifiedName()">getQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getString()">getString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getType()">getType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasChild(com.google.javascript.rhino.Node)">hasChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasChildren()">hasChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasMoreThanOneChild()">hasMoreThanOneChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasOneChild()">hasOneChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasSideEffects()">hasSideEffects</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isEquivalentTo(com.google.javascript.rhino.Node)">isEquivalentTo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isNoSideEffectsCall()">isNoSideEffectsCall</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isOptionalArg()">isOptionalArg</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isQualifiedName()">isQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isQuotedString()">isQuotedString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isSyntheticBlock()">isSyntheticBlock</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isUnscopedQualifiedName()">isUnscopedQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isVarArgs()">isVarArgs</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#mergeLineCharNo(int, int)">mergeLineCharNo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newNumber(double)">newNumber</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newNumber(double, int, int)">newNumber</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(int, java.lang.String)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(int, java.lang.String, int, int)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(java.lang.String)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(java.lang.String, int, int)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putBooleanProp(int, boolean)">putBooleanProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putIntProp(int, int)">putIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putProp(int, java.lang.Object)">putProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChild(com.google.javascript.rhino.Node)">removeChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChildAfter(com.google.javascript.rhino.Node)">removeChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChildren()">removeChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeFirstChild()">removeFirstChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeProp(int)">removeProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#replaceChild(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">replaceChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#replaceChildAfter(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">replaceChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setCharno(int)">setCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setDirectives(java.util.Set)">setDirectives</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setDouble(double)">setDouble</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setIsNoSideEffectsCall()">setIsNoSideEffectsCall</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setIsSyntheticBlock(boolean)">setIsSyntheticBlock</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setJSDocInfo(com.google.javascript.rhino.JSDocInfo)">setJSDocInfo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setJSType(com.google.javascript.rhino.jstype.JSType)">setJSType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setLineno(int)">setLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setOptionalArg(boolean)">setOptionalArg</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setQuotedString()">setQuotedString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setString(java.lang.String)">setString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setType(int)">setType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setVarArgs(boolean)">setVarArgs</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setWasEmptyNode(boolean)">setWasEmptyNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#siblings()">siblings</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#tokenToName(int)">tokenToName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toString()">toString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toString(boolean, boolean, boolean)">toString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toStringTree()">toStringTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#wasEmptyNode()">wasEmptyNode</A></CODE></TD>
 </TR>
 </TABLE>
 &nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
diff --git a/javadoc/com/google/javascript/rhino/Node.html b/javadoc/com/google/javascript/rhino/Node.html
index 790738e..4db7683 100644
--- a/javadoc/com/google/javascript/rhino/Node.html
+++ b/javadoc/com/google/javascript/rhino/Node.html
@@ -280,6 +280,14 @@
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>static&nbsp;int</CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/rhino/Node.html#DIRECTIVES">DIRECTIVES</A></B></CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>static&nbsp;int</CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/rhino/Node.html#EMPTY_BLOCK">EMPTY_BLOCK</A></B></CODE>
 
 <BR>
@@ -1013,6 +1021,14 @@
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&gt;</CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/rhino/Node.html#getDirectives()">getDirectives</A></B>()</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the set of ES5 directives for this node.</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>&nbsp;double</CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/rhino/Node.html#getDouble()">getDouble</A></B>()</CODE>
 
@@ -1413,6 +1429,14 @@
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>&nbsp;void</CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/rhino/Node.html#setDirectives(java.util.Set)">setDirectives</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&gt;&nbsp;val)</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the ES5 directives on this node.</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>&nbsp;void</CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/rhino/Node.html#setDouble(double)">setDouble</A></B>(double&nbsp;s)</CODE>
 
 <BR>
@@ -2102,6 +2126,16 @@
 </DL>
 <HR>
 
+<A NAME="DIRECTIVES"><!-- --></A><H3>
+DIRECTIVES</H3>
+<PRE>
+public static final int <B>DIRECTIVES</B></PRE>
+<DL>
+<DL>
+<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#com.google.javascript.rhino.Node.DIRECTIVES">Constant Field Values</A></DL>
+</DL>
+<HR>
+
 <A NAME="LAST_PROP"><!-- --></A><H3>
 LAST_PROP</H3>
 <PRE>
@@ -3733,6 +3767,38 @@
 </DL>
 <HR>
 
+<A NAME="setDirectives(java.util.Set)"><!-- --></A><H3>
+setDirectives</H3>
+<PRE>
+public void <B>setDirectives</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&gt;&nbsp;val)</PRE>
+<DL>
+<DD>Sets the ES5 directives on this node.
+<P>
+<DD><DL>
+</DL>
+</DD>
+<DD><DL>
+</DL>
+</DD>
+</DL>
+<HR>
+
+<A NAME="getDirectives()"><!-- --></A><H3>
+getDirectives</H3>
+<PRE>
+public <A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&gt; <B>getDirectives</B>()</PRE>
+<DL>
+<DD>Returns the set of ES5 directives for this node.
+<P>
+<DD><DL>
+</DL>
+</DD>
+<DD><DL>
+</DL>
+</DD>
+</DL>
+<HR>
+
 <A NAME="setWasEmptyNode(boolean)"><!-- --></A><H3>
 setWasEmptyNode</H3>
 <PRE>
diff --git a/javadoc/com/google/javascript/rhino/ScriptOrFnNode.html b/javadoc/com/google/javascript/rhino/ScriptOrFnNode.html
index 35aa574..edd934b 100644
--- a/javadoc/com/google/javascript/rhino/ScriptOrFnNode.html
+++ b/javadoc/com/google/javascript/rhino/ScriptOrFnNode.html
@@ -176,7 +176,7 @@
 <TH ALIGN="left"><B>Fields inherited from class com.google.javascript.rhino.<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A></B></TH>
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
-<TD><CODE><A HREF="../../../../com/google/javascript/rhino/Node.html#ATTRIBUTE_FLAG">ATTRIBUTE_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BOTH">BOTH</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BRACELESS_TYPE">BRACELESS_TYPE</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BREAK_PROP">BREAK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CASEARRAY_PROP">CASEARRAY_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CASES_PROP">CASES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CATCH_SCOPE_PROP">CATCH_SCOPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CODEOFFSET_PROP">CODEOFFSET_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#COLUMN_BITS">COLUMN_BITS</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#COLUMN_MASK">COLUMN_MASK</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CONTINUE_PROP">CONTINUE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DEBUGSOURCE_PROP">DEBUGSOURCE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DECR_FLAG">DECR_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DEFAULT_PROP">DEFAULT_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DESCENDANTS_FLAG">DESCENDANTS_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DIRECTCALL_PROP">DIRECTCALL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#EMPTY_BLOCK">EMPTY_BLOCK</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ENUM_PROP">ENUM_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FINALLY_PROP">FINALLY_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FIXUPS_PROP">FIXUPS_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FUNCTION_PROP">FUNCTION_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#INCRDECR_PROP">INCRDECR_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_CONSTANT_NAME">IS_CONSTANT_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_DISPATCHER">IS_DISPATCHER</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_NAMESPACE">IS_NAMESPACE</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_OPTIONAL_PARAM">IS_OPTIONAL_PARAM</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_VAR_ARGS_PARAM">IS_VAR_ARGS_PARAM</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ISNUMBER_PROP">ISNUMBER_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#JSDOC_INFO_PROP">JSDOC_INFO_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LABEL_ID_PROP">LABEL_ID_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LABEL_PROP">LABEL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LAST_PROP">LAST_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LASTUSE_PROP">LASTUSE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LEFT">LEFT</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCAL_BLOCK_PROP">LOCAL_BLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCAL_PROP">LOCAL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCALCOUNT_PROP">LOCALCOUNT_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#MAX_COLUMN_NUMBER">MAX_COLUMN_NUMBER</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#MEMBER_TYPE_PROP">MEMBER_TYPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NAME_PROP">NAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NO_SIDE_EFFECTS_CALL">NO_SIDE_EFFECTS_CALL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NON_SPECIALCALL">NON_SPECIALCALL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#OBJECT_IDS_PROP">OBJECT_IDS_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#OPT_ARG_NAME">OPT_ARG_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ORIGINALNAME_PROP">ORIGINALNAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#PARENTHESIZED_PROP">PARENTHESIZED_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#POST_FLAG">POST_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#PROPERTY_FLAG">PROPERTY_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#QUOTED_PROP">QUOTED_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#REGEXP_PROP">REGEXP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#RIGHT">RIGHT</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SKIP_INDEXES_PROP">SKIP_INDEXES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SOURCEFILE_PROP">SOURCEFILE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SOURCENAME_PROP">SOURCENAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIAL_PROP_PROP">SPECIAL_PROP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_EVAL">SPECIALCALL_EVAL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_PROP">SPECIALCALL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_WITH">SPECIALCALL_WITH</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SYNTHETIC_BLOCK_PROP">SYNTHETIC_BLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TARGET_PROP">TARGET_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TARGETBLOCK_PROP">TARGETBLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TEMP_PROP">TEMP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TYPE_PROP">TYPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#USES_PROP">USES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VAR_ARGS_NAME">VAR_ARGS_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VARIABLE_PROP">VARIABLE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VARS_PROP">VARS_PROP</A></CODE></TD>
+<TD><CODE><A HREF="../../../../com/google/javascript/rhino/Node.html#ATTRIBUTE_FLAG">ATTRIBUTE_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BOTH">BOTH</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BRACELESS_TYPE">BRACELESS_TYPE</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#BREAK_PROP">BREAK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CASEARRAY_PROP">CASEARRAY_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CASES_PROP">CASES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CATCH_SCOPE_PROP">CATCH_SCOPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CODEOFFSET_PROP">CODEOFFSET_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#COLUMN_BITS">COLUMN_BITS</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#COLUMN_MASK">COLUMN_MASK</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#CONTINUE_PROP">CONTINUE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DEBUGSOURCE_PROP">DEBUGSOURCE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DECR_FLAG">DECR_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DEFAULT_PROP">DEFAULT_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DESCENDANTS_FLAG">DESCENDANTS_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DIRECTCALL_PROP">DIRECTCALL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#DIRECTIVES">DIRECTIVES</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#EMPTY_BLOCK">EMPTY_BLOCK</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ENUM_PROP">ENUM_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FINALLY_PROP">FINALLY_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FIXUPS_PROP">FIXUPS_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#FUNCTION_PROP">FUNCTION_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#INCRDECR_PROP">INCRDECR_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_CONSTANT_NAME">IS_CONSTANT_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_DISPATCHER">IS_DISPATCHER</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_NAMESPACE">IS_NAMESPACE</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_OPTIONAL_PARAM">IS_OPTIONAL_PARAM</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#IS_VAR_ARGS_PARAM">IS_VAR_ARGS_PARAM</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ISNUMBER_PROP">ISNUMBER_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#JSDOC_INFO_PROP">JSDOC_INFO_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LABEL_ID_PROP">LABEL_ID_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LABEL_PROP">LABEL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LAST_PROP">LAST_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LASTUSE_PROP">LASTUSE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LEFT">LEFT</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCAL_BLOCK_PROP">LOCAL_BLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCAL_PROP">LOCAL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#LOCALCOUNT_PROP">LOCALCOUNT_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#MAX_COLUMN_NUMBER">MAX_COLUMN_NUMBER</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#MEMBER_TYPE_PROP">MEMBER_TYPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NAME_PROP">NAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NO_SIDE_EFFECTS_CALL">NO_SIDE_EFFECTS_CALL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#NON_SPECIALCALL">NON_SPECIALCALL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#OBJECT_IDS_PROP">OBJECT_IDS_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#OPT_ARG_NAME">OPT_ARG_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#ORIGINALNAME_PROP">ORIGINALNAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#PARENTHESIZED_PROP">PARENTHESIZED_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#POST_FLAG">POST_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#PROPERTY_FLAG">PROPERTY_FLAG</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#QUOTED_PROP">QUOTED_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#REGEXP_PROP">REGEXP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#RIGHT">RIGHT</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SKIP_INDEXES_PROP">SKIP_INDEXES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SOURCEFILE_PROP">SOURCEFILE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SOURCENAME_PROP">SOURCENAME_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIAL_PROP_PROP">SPECIAL_PROP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_EVAL">SPECIALCALL_EVAL</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_PROP">SPECIALCALL_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SPECIALCALL_WITH">SPECIALCALL_WITH</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#SYNTHETIC_BLOCK_PROP">SYNTHETIC_BLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TARGET_PROP">TARGET_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TARGETBLOCK_PROP">TARGETBLOCK_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TEMP_PROP">TEMP_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#TYPE_PROP">TYPE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#USES_PROP">USES_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VAR_ARGS_NAME">VAR_ARGS_NAME</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VARIABLE_PROP">VARIABLE_PROP</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#VARS_PROP">VARS_PROP</A></CODE></TD>
 </TR>
 </TABLE>
 &nbsp;
@@ -454,7 +454,7 @@
 <TH ALIGN="left"><B>Methods inherited from class com.google.javascript.rhino.<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A></B></TH>
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
-<TD><CODE><A HREF="../../../../com/google/javascript/rhino/Node.html#addChildAfter(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">addChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildBefore(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">addChildBefore</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildrenToBack(com.google.javascript.rhino.Node)">addChildrenToBack</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildrenToFront(com.google.javascript.rhino.Node)">addChildrenToFront</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildToBack(com.google.javascript.rhino.Node)">addChildToBack</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildToFront(com.google.javascript.rhino.Node)">addChildToFront</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#appendStringTree(java.lang.Appendable)">appendStringTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#checkTreeEquals(com.google.javascript.rhino.Node)">checkTreeEquals</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#checkTreeEqualsSilent(com.google.javascript.rhino.Node)">checkTreeEqualsSilent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#children()">children</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#cloneNode()">cloneNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#cloneTree()">cloneTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#copyInformationFrom(com.google.javascript.rhino.Node)">copyInformationFrom</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#detachChildren()">detachChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#detachFromParent()">detachFromParent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#extractCharno(int)">extractCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#extractLineno(int)">extractLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getAncestor(int)">getAncestor</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getAncestors()">getAncestors</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getBooleanProp(int)">getBooleanProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getCharno()">getCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildAtIndex(int)">getChildAtIndex</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildBefore(com.google.javascript.rhino.Node)">getChildBefore</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildCount()">getChildCount</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getDouble()">getDouble</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getExistingIntProp(int)">getExistingIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getFirstChild()">getFirstChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getIntProp(int, int)">getIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJsDocBuilderForNode()">getJsDocBuilderForNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJSDocInfo()">getJSDocInfo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJSType()">getJSType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLastChild()">getLastChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLastSibling()">getLastSibling</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLineno()">getLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getNext()">getNext</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getParent()">getParent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getProp(int)">getProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getQualifiedName()">getQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getString()">getString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getType()">getType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasChild(com.google.javascript.rhino.Node)">hasChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasChildren()">hasChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasMoreThanOneChild()">hasMoreThanOneChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasOneChild()">hasOneChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasSideEffects()">hasSideEffects</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isEquivalentTo(com.google.javascript.rhino.Node)">isEquivalentTo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isNoSideEffectsCall()">isNoSideEffectsCall</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isOptionalArg()">isOptionalArg</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isQualifiedName()">isQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isQuotedString()">isQuotedString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isSyntheticBlock()">isSyntheticBlock</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isUnscopedQualifiedName()">isUnscopedQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isVarArgs()">isVarArgs</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#mergeLineCharNo(int, int)">mergeLineCharNo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newNumber(double)">newNumber</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newNumber(double, int, int)">newNumber</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(int, java.lang.String)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(int, java.lang.String, int, int)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(java.lang.String)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(java.lang.String, int, int)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putBooleanProp(int, boolean)">putBooleanProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putIntProp(int, int)">putIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putProp(int, java.lang.Object)">putProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChild(com.google.javascript.rhino.Node)">removeChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChildAfter(com.google.javascript.rhino.Node)">removeChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChildren()">removeChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeFirstChild()">removeFirstChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeProp(int)">removeProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#replaceChild(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">replaceChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#replaceChildAfter(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">replaceChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setCharno(int)">setCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setDouble(double)">setDouble</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setIsNoSideEffectsCall()">setIsNoSideEffectsCall</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setIsSyntheticBlock(boolean)">setIsSyntheticBlock</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setJSDocInfo(com.google.javascript.rhino.JSDocInfo)">setJSDocInfo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setJSType(com.google.javascript.rhino.jstype.JSType)">setJSType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setLineno(int)">setLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setOptionalArg(boolean)">setOptionalArg</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setQuotedString()">setQuotedString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setString(java.lang.String)">setString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setType(int)">setType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setVarArgs(boolean)">setVarArgs</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setWasEmptyNode(boolean)">setWasEmptyNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#siblings()">siblings</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#tokenToName(int)">tokenToName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toString()">toString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toString(boolean, boolean, boolean)">toString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toStringTree()">toStringTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#wasEmptyNode()">wasEmptyNode</A></CODE></TD>
+<TD><CODE><A HREF="../../../../com/google/javascript/rhino/Node.html#addChildAfter(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">addChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildBefore(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">addChildBefore</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildrenToBack(com.google.javascript.rhino.Node)">addChildrenToBack</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildrenToFront(com.google.javascript.rhino.Node)">addChildrenToFront</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildToBack(com.google.javascript.rhino.Node)">addChildToBack</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#addChildToFront(com.google.javascript.rhino.Node)">addChildToFront</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#appendStringTree(java.lang.Appendable)">appendStringTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#checkTreeEquals(com.google.javascript.rhino.Node)">checkTreeEquals</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#checkTreeEqualsSilent(com.google.javascript.rhino.Node)">checkTreeEqualsSilent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#children()">children</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#cloneNode()">cloneNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#cloneTree()">cloneTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#copyInformationFrom(com.google.javascript.rhino.Node)">copyInformationFrom</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#detachChildren()">detachChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#detachFromParent()">detachFromParent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#extractCharno(int)">extractCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#extractLineno(int)">extractLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getAncestor(int)">getAncestor</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getAncestors()">getAncestors</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getBooleanProp(int)">getBooleanProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getCharno()">getCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildAtIndex(int)">getChildAtIndex</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildBefore(com.google.javascript.rhino.Node)">getChildBefore</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getChildCount()">getChildCount</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getDirectives()">getDirectives</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getDouble()">getDouble</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getExistingIntProp(int)">getExistingIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getFirstChild()">getFirstChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getIntProp(int, int)">getIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJsDocBuilderForNode()">getJsDocBuilderForNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJSDocInfo()">getJSDocInfo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getJSType()">getJSType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLastChild()">getLastChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLastSibling()">getLastSibling</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getLineno()">getLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getNext()">getNext</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getParent()">getParent</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getProp(int)">getProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getQualifiedName()">getQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getString()">getString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#getType()">getType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasChild(com.google.javascript.rhino.Node)">hasChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasChildren()">hasChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasMoreThanOneChild()">hasMoreThanOneChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasOneChild()">hasOneChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#hasSideEffects()">hasSideEffects</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isEquivalentTo(com.google.javascript.rhino.Node)">isEquivalentTo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isNoSideEffectsCall()">isNoSideEffectsCall</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isOptionalArg()">isOptionalArg</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isQualifiedName()">isQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isQuotedString()">isQuotedString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isSyntheticBlock()">isSyntheticBlock</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isUnscopedQualifiedName()">isUnscopedQualifiedName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#isVarArgs()">isVarArgs</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#mergeLineCharNo(int, int)">mergeLineCharNo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newNumber(double)">newNumber</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newNumber(double, int, int)">newNumber</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(int, java.lang.String)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(int, java.lang.String, int, int)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(java.lang.String)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#newString(java.lang.String, int, int)">newString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putBooleanProp(int, boolean)">putBooleanProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putIntProp(int, int)">putIntProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#putProp(int, java.lang.Object)">putProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChild(com.google.javascript.rhino.Node)">removeChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChildAfter(com.google.javascript.rhino.Node)">removeChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeChildren()">removeChildren</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeFirstChild()">removeFirstChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#removeProp(int)">removeProp</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#replaceChild(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">replaceChild</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#replaceChildAfter(com.google.javascript.rhino.Node, com.google.javascript.rhino.Node)">replaceChildAfter</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setCharno(int)">setCharno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setDirectives(java.util.Set)">setDirectives</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setDouble(double)">setDouble</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setIsNoSideEffectsCall()">setIsNoSideEffectsCall</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setIsSyntheticBlock(boolean)">setIsSyntheticBlock</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setJSDocInfo(com.google.javascript.rhino.JSDocInfo)">setJSDocInfo</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setJSType(com.google.javascript.rhino.jstype.JSType)">setJSType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setLineno(int)">setLineno</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setOptionalArg(boolean)">setOptionalArg</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setQuotedString()">setQuotedString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setString(java.lang.String)">setString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setType(int)">setType</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setVarArgs(boolean)">setVarArgs</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#setWasEmptyNode(boolean)">setWasEmptyNode</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#siblings()">siblings</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#tokenToName(int)">tokenToName</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toString()">toString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toString(boolean, boolean, boolean)">toString</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#toStringTree()">toStringTree</A>, <A HREF="../../../../com/google/javascript/rhino/Node.html#wasEmptyNode()">wasEmptyNode</A></CODE></TD>
 </TR>
 </TABLE>
 &nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
diff --git a/javadoc/constant-values.html b/javadoc/constant-values.html
index 1df50e6..89e35f7 100644
--- a/javadoc/constant-values.html
+++ b/javadoc/constant-values.html
@@ -490,6 +490,12 @@
 <TD ALIGN="right"><CODE>26</CODE></TD>
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
+<A NAME="com.google.javascript.rhino.Node.DIRECTIVES"><!-- --></A><TD ALIGN="right"><FONT SIZE="-1">
+<CODE>public&nbsp;static&nbsp;final&nbsp;int</CODE></FONT></TD>
+<TD ALIGN="left"><CODE><A HREF="com/google/javascript/rhino/Node.html#DIRECTIVES">DIRECTIVES</A></CODE></TD>
+<TD ALIGN="right"><CODE>48</CODE></TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
 <A NAME="com.google.javascript.rhino.Node.EMPTY_BLOCK"><!-- --></A><TD ALIGN="right"><FONT SIZE="-1">
 <CODE>public&nbsp;static&nbsp;final&nbsp;int</CODE></FONT></TD>
 <TD ALIGN="left"><CODE><A HREF="com/google/javascript/rhino/Node.html#EMPTY_BLOCK">EMPTY_BLOCK</A></CODE></TD>
@@ -583,7 +589,7 @@
 <A NAME="com.google.javascript.rhino.Node.LAST_PROP"><!-- --></A><TD ALIGN="right"><FONT SIZE="-1">
 <CODE>public&nbsp;static&nbsp;final&nbsp;int</CODE></FONT></TD>
 <TD ALIGN="left"><CODE><A HREF="com/google/javascript/rhino/Node.html#LAST_PROP">LAST_PROP</A></CODE></TD>
-<TD ALIGN="right"><CODE>47</CODE></TD>
+<TD ALIGN="right"><CODE>48</CODE></TD>
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <A NAME="com.google.javascript.rhino.Node.LASTUSE_PROP"><!-- --></A><TD ALIGN="right"><FONT SIZE="-1">
diff --git a/javadoc/index-all.html b/javadoc/index-all.html
index 5d04a20..b1f0878 100644
--- a/javadoc/index-all.html
+++ b/javadoc/index-all.html
@@ -1221,6 +1221,9 @@
 <DT><A HREF="./com/google/javascript/jscomp/graph/DiGraph.DiGraphEdge.html" title="interface in com.google.javascript.jscomp.graph"><B>DiGraph.DiGraphEdge</B></A>&lt;<A HREF="./com/google/javascript/jscomp/graph/DiGraph.DiGraphEdge.html" title="type parameter in DiGraph.DiGraphEdge">N</A>,<A HREF="./com/google/javascript/jscomp/graph/DiGraph.DiGraphEdge.html" title="type parameter in DiGraph.DiGraphEdge">E</A>&gt; - Interface in <A HREF="./com/google/javascript/jscomp/graph/package-summary.html">com.google.javascript.jscomp.graph</A><DD>A generic directed graph edge.<DT><A HREF="./com/google/javascript/jscomp/graph/DiGraph.DiGraphNode.html" title="interface in com.google.javascript.jscomp.graph"><B>DiGraph.DiGraphNode</B></A>&lt;<A HREF="./com/google/javascript/jscomp/graph/DiGraph.DiGraphNode.html" title="type parameter in DiGraph.DiGraphNode">N</A>,<A HREF="./com/google/javascript/jscomp/graph/DiGraph.DiGraphNode.html" title="type parameter in DiGraph.DiGraphNode">E</A>&gt; - Interface in <A HREF="./com/google/javascript/jscomp/graph/package-summary.html">com.google.javascript.jscomp.graph</A><DD>A generic directed graph node.<DT><A HREF="./com/google/javascript/rhino/Node.html#DIRECTCALL_PROP"><B>DIRECTCALL_PROP</B></A> - 
 Static variable in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>
 <DD>&nbsp;
+<DT><A HREF="./com/google/javascript/rhino/Node.html#DIRECTIVES"><B>DIRECTIVES</B></A> - 
+Static variable in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>
+<DD>&nbsp;
 <DT><A HREF="./com/google/javascript/jscomp/DiagnosticType.html#disabled(java.lang.String, java.lang.String)"><B>disabled(String, String)</B></A> - 
 Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/DiagnosticType.html" title="class in com.google.javascript.jscomp">DiagnosticType</A>
 <DD>Create a DiagnosticType at level CheckLevel.OFF
@@ -1784,15 +1787,27 @@
 <DT><A HREF="./com/google/javascript/jscomp/SourceFile.html#fromCode(java.lang.String, java.lang.String)"><B>fromCode(String, String)</B></A> - 
 Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A>
 <DD>&nbsp;
+<DT><A HREF="./com/google/javascript/jscomp/JSSourceFile.html#fromFile(java.lang.String, java.nio.charset.Charset)"><B>fromFile(String, Charset)</B></A> - 
+Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A>
+<DD>&nbsp;
 <DT><A HREF="./com/google/javascript/jscomp/JSSourceFile.html#fromFile(java.lang.String)"><B>fromFile(String)</B></A> - 
 Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A>
 <DD>&nbsp;
+<DT><A HREF="./com/google/javascript/jscomp/JSSourceFile.html#fromFile(java.io.File, java.nio.charset.Charset)"><B>fromFile(File, Charset)</B></A> - 
+Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A>
+<DD>&nbsp;
 <DT><A HREF="./com/google/javascript/jscomp/JSSourceFile.html#fromFile(java.io.File)"><B>fromFile(File)</B></A> - 
 Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/JSSourceFile.html" title="class in com.google.javascript.jscomp">JSSourceFile</A>
 <DD>&nbsp;
+<DT><A HREF="./com/google/javascript/jscomp/SourceFile.html#fromFile(java.lang.String, java.nio.charset.Charset)"><B>fromFile(String, Charset)</B></A> - 
+Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A>
+<DD>&nbsp;
 <DT><A HREF="./com/google/javascript/jscomp/SourceFile.html#fromFile(java.lang.String)"><B>fromFile(String)</B></A> - 
 Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A>
 <DD>&nbsp;
+<DT><A HREF="./com/google/javascript/jscomp/SourceFile.html#fromFile(java.io.File, java.nio.charset.Charset)"><B>fromFile(File, Charset)</B></A> - 
+Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A>
+<DD>&nbsp;
 <DT><A HREF="./com/google/javascript/jscomp/SourceFile.html#fromFile(java.io.File)"><B>fromFile(File)</B></A> - 
 Static method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/SourceFile.html" title="class in com.google.javascript.jscomp">SourceFile</A>
 <DD>&nbsp;
@@ -2178,6 +2193,9 @@
 <DT><A HREF="./com/google/javascript/rhino/jstype/JSTypeRegistry.html#getDirectImplementors(com.google.javascript.rhino.jstype.ObjectType)"><B>getDirectImplementors(ObjectType)</B></A> - 
 Method in class com.google.javascript.rhino.jstype.<A HREF="./com/google/javascript/rhino/jstype/JSTypeRegistry.html" title="class in com.google.javascript.rhino.jstype">JSTypeRegistry</A>
 <DD>Returns a collection of types that directly implement <code>interfaceInstance</code>.
+<DT><A HREF="./com/google/javascript/rhino/Node.html#getDirectives()"><B>getDirectives()</B></A> - 
+Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>
+<DD>Returns the set of ES5 directives for this node.
 <DT><A HREF="./com/google/javascript/rhino/Node.html#getDouble()"><B>getDouble()</B></A> - 
 Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>
 <DD>Can only be called when <tt>getType() == TokenStream.NUMBER</tt>
@@ -5136,6 +5154,9 @@
 <DT><A HREF="./com/google/javascript/rhino/Node.html#ORIGINALNAME_PROP"><B>ORIGINALNAME_PROP</B></A> - 
 Static variable in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>
 <DD>&nbsp;
+<DT><A HREF="./com/google/javascript/jscomp/CompilerOptions.html#outputCharset"><B>outputCharset</B></A> - 
+Variable in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/CompilerOptions.html" title="class in com.google.javascript.jscomp">CompilerOptions</A>
+<DD>Charset to use when generating code.
 <DT><A HREF="./com/google/javascript/jscomp/TypeCheck.html#OVERRIDING_PROTOTYPE_WITH_NON_OBJECT"><B>OVERRIDING_PROTOTYPE_WITH_NON_OBJECT</B></A> - 
 Static variable in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/TypeCheck.html" title="class in com.google.javascript.jscomp">TypeCheck</A>
 <DD>&nbsp;
@@ -5832,6 +5853,9 @@
 <DT><A HREF="./com/google/javascript/jscomp/graph/DiGraph.DiGraphEdge.html#setDestination(com.google.javascript.jscomp.graph.DiGraph.DiGraphNode)"><B>setDestination(DiGraph.DiGraphNode&lt;N, E&gt;)</B></A> - 
 Method in interface com.google.javascript.jscomp.graph.<A HREF="./com/google/javascript/jscomp/graph/DiGraph.DiGraphEdge.html" title="interface in com.google.javascript.jscomp.graph">DiGraph.DiGraphEdge</A>
 <DD>&nbsp;
+<DT><A HREF="./com/google/javascript/rhino/Node.html#setDirectives(java.util.Set)"><B>setDirectives(Set&lt;String&gt;)</B></A> - 
+Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>
+<DD>Sets the ES5 directives on this node.
 <DT><A HREF="./com/google/javascript/rhino/Node.html#setDouble(double)"><B>setDouble(double)</B></A> - 
 Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>
 <DD>Can only be called when <tt>getType() == TokenStream.NUMBER</tt>
diff --git a/javadoc/serialized-form.html b/javadoc/serialized-form.html
index 17b3636..f1a0ff9 100644
--- a/javadoc/serialized-form.html
+++ b/javadoc/serialized-form.html
@@ -1681,6 +1681,17 @@
 <DL>
 </DL>
 </DL>
+<HR>
+<H3>
+outputCharset</H3>
+<PRE>
+<A HREF="http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html?is-external=true" title="class or interface in java.nio.charset">Charset</A> <B>outputCharset</B></PRE>
+<DL>
+<DD>Charset to use when generating code.  If null, then output ASCII.
+<P>
+<DL>
+</DL>
+</DL>
 
 <P>
 <A NAME="com.google.javascript.jscomp.JsAst"><!-- --></A>
diff --git a/lib/google_common_deploy.jar b/lib/google_common_deploy.jar
index 1974c66..094672f 100755
--- a/lib/google_common_deploy.jar
+++ b/lib/google_common_deploy.jar
Binary files differ
diff --git a/src/com/google/javascript/jscomp/AbstractCompilerRunner.java b/src/com/google/javascript/jscomp/AbstractCompilerRunner.java
index e509b96..d51da80 100644
--- a/src/com/google/javascript/jscomp/AbstractCompilerRunner.java
+++ b/src/com/google/javascript/jscomp/AbstractCompilerRunner.java
@@ -17,6 +17,7 @@
 package com.google.javascript.jscomp;
 
 import com.google.common.annotations.VisibleForTesting;
+import com.google.common.base.Charsets;
 import com.google.common.base.Preconditions;
 import com.google.common.collect.ImmutableList;
 import com.google.common.collect.Maps;
@@ -32,6 +33,7 @@
 import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.PrintStream;
+import java.nio.charset.Charset;
 import java.util.ArrayList;
 import java.util.Collections;
 import java.util.List;
@@ -208,10 +210,15 @@
       "the variable is marked true.")
   public static final Flag<List<String>> FLAG_define = Flag.stringCollector();
 
+  @FlagSpec(help = "Input charset for all files.")
+  static final Flag<String> FLAG_charset = Flag.value("");
+
   private PrintStream out;
   private final PrintStream err;
   private A compiler;
 
+  private static Charset inputCharset;
+
   public AbstractCompilerRunner(String[] args) {
     this(args, System.out, System.err);
   }
@@ -263,7 +270,8 @@
     return compiler;
   }
 
-  final protected void setRunOptions(B options) throws IOException {
+  final protected void setRunOptions(B options)
+      throws IOException, FlagUsageException {
     if (FLAG_js_output_file.get().length() > 0) {
       options.jsOutputFile = FLAG_js_output_file.get();
     }
@@ -285,6 +293,8 @@
     if (FLAG_third_party.get()) {
       options.setCodingConvention(new DefaultCodingConvention());
     }
+
+    inputCharset = getInputCharset();
   }
 
   /**
@@ -338,7 +348,8 @@
     boolean usingStdin = false;
     for (String filename : files) {
       if (!"-".equals(filename)) {
-        inputs.add(JSSourceFile.fromFile(filename));
+        JSSourceFile newFile = JSSourceFile.fromFile(filename, inputCharset);
+        inputs.add(newFile);
       } else {
         if (!allowStdIn) {
           throw new FlagUsageException("Can't specify stdin.");
@@ -591,8 +602,18 @@
 
     setRunOptions(options);
 
-    if (!options.jsOutputFile.equals("")) {
-      out = new PrintStream(options.jsOutputFile);
+    // Let the outputCharset be the same as the input charset... except if
+    // we're reading in UTF-8 by default.  By tradition, we've always
+    // output ASCII to avoid various hiccups with different browsers,
+    // proxies and firewalls.
+    if (inputCharset == Charsets.UTF_8) {
+      options.outputCharset = Charsets.US_ASCII;
+    } else {
+      options.outputCharset = inputCharset;
+    }
+
+    if (!options.jsOutputFile.isEmpty()) {
+      out = new PrintStream(options.jsOutputFile, inputCharset.name());
     }
 
     ((PrintStreamErrorManager) compiler.getErrorManager())
@@ -704,6 +725,25 @@
     return Math.min(result.errors.length, 0x7f);
   }
 
+  /**
+   * Query the flag for the charset, and return a Charset object representing
+   * the selection.  Keep this in a separate function
+   * so it can be called both in static and normal methods.
+   *
+   * @return Charset to use when reading inputs
+   * @throws FlagUsageException if flag is not a valid Charset name.
+   */
+  private static Charset getInputCharset() throws FlagUsageException {
+    if (!FLAG_charset.get().isEmpty()) {
+      if (!Charset.isSupported(FLAG_charset.get())) {
+        throw new FlagUsageException(FLAG_charset.get() +
+            " is not a valid charset name.");
+      }
+      return Charset.forName(FLAG_charset.get());
+    }
+    return Charsets.UTF_8;
+  }
+
   protected List<JSSourceFile> createExterns() throws FlagUsageException,
       IOException {
     return createExternInputs(FLAG_externs.get());
@@ -769,7 +809,7 @@
 
     String mapPath = null;
 
-    if (sourceMapPath.contains(File.separator)) {
+    if (sourceMapPath.contains("/") || sourceMapPath.contains("\\")) {
       mapPath = sourceMapPath;
     } else {
       File outputFile = new File(path);
diff --git a/src/com/google/javascript/jscomp/CodeGenerator.java b/src/com/google/javascript/jscomp/CodeGenerator.java
index d9496d7..3c97fc4 100644
--- a/src/com/google/javascript/jscomp/CodeGenerator.java
+++ b/src/com/google/javascript/jscomp/CodeGenerator.java
@@ -16,12 +16,15 @@
 
 package com.google.javascript.jscomp;
 
+import com.google.common.base.Charsets;
 import com.google.common.base.Preconditions;
 import com.google.common.base.StringUtil;
 import com.google.javascript.rhino.Node;
 import com.google.javascript.rhino.Token;
 import com.google.javascript.rhino.TokenStream;
 
+import java.nio.charset.Charset;
+import java.nio.charset.CharsetEncoder;
 
 /**
  * CodeGenerator generates codes from a parse tree, sending it to the specified
@@ -34,8 +37,23 @@
 
   private final CodeConsumer cc;
 
-  CodeGenerator(CodeConsumer consumer) {
+  private final CharsetEncoder outputCharsetEncoder;
+
+  CodeGenerator(CodeConsumer consumer, Charset outputCharset) {
     cc = consumer;
+    if (outputCharset == null || outputCharset == Charsets.US_ASCII) {
+      // If we want our default (pretending to be UTF-8, but escaping anything
+      // outside of straight ASCII), then don't use the encoder, but
+      // just special-case the code.  This keeps the normal path through
+      // the code identical to how it's been for years.
+      this.outputCharsetEncoder = null;
+    } else {
+      this.outputCharsetEncoder = outputCharset.newEncoder();
+    }
+  }
+
+  CodeGenerator(CodeConsumer consumer) {
+    this(consumer, null);
   }
 
   void add(String str) {
@@ -221,7 +239,7 @@
           throw new Error("Expected children to be strings");
         }
 
-        String regexp = regexpEscape(first.getString());
+        String regexp = regexpEscape(first.getString(), outputCharsetEncoder);
 
         // I only use one .add because whitespace matters
         if (childCount == 2) {
@@ -495,7 +513,7 @@
 
       case Token.STRING:
         Preconditions.checkState(childCount == 0);
-        add(jsString(n.getString()));
+        add(jsString(n.getString(), outputCharsetEncoder));
         break;
 
       case Token.DELPROP:
@@ -730,7 +748,7 @@
   }
 
   /** Outputs a js string, using the optimal (single/double) quote character */
-  static String jsString(String s) {
+  static String jsString(String s, CharsetEncoder outputCharsetEncoder) {
     int singleq = 0, doubleq = 0;
 
     // could count the quotes and pick the optimal quote character
@@ -755,19 +773,28 @@
       singlequote = "\'";
     }
 
-    return strEscape(s, quote, doublequote, singlequote, "\\\\");
+    return strEscape(s, quote, doublequote, singlequote, "\\\\",
+        outputCharsetEncoder);
   }
 
   /** Escapes regular expression */
+  static String regexpEscape(String s, CharsetEncoder outputCharsetEncoder) {
+    return strEscape(s, '/', "\"", "'", "\\", outputCharsetEncoder);
+  }
+
+  /* If the user doesn't want to specify an output charset encoder, assume
+     they want Latin/ASCII characters only.
+   */
   static String regexpEscape(String s) {
-    return strEscape(s, '/', "\"", "'", "\\");
+    return regexpEscape(s, null);
   }
 
   /** Helper to escape javascript string as well as regular expression */
   static String strEscape(String s, char quote,
                           String doublequoteEscape,
                           String singlequoteEscape,
-                          String backslashEscape) {
+                          String backslashEscape,
+                          CharsetEncoder outputCharsetEncoder) {
     StringBuilder sb = new StringBuilder();
     sb.append(quote);
     for (int i = 0; i < s.length(); i++) {
@@ -798,15 +825,27 @@
           }
           break;
         default:
-          // Please keep in sync with the same code in identifierEscape().
-          if (c > 0x1F && c < 0x7F) {
-            // Non-control ASCII characters are safe to transmit
-            sb.append(c);
+          // If we're given an outputCharsetEncoder, then check if the
+          //  character can be represented in this character set.
+          if (outputCharsetEncoder != null) {
+            if (outputCharsetEncoder.canEncode(c)) {
+              sb.append(c);
+            } else {
+              // Unicode-escape the character.
+              StringUtil.appendHexJavaScriptRepresentation(sb, c);
+            }
           } else {
-            // Other characters can be misinterpreted by some js parsers,
-            // or perhaps mangled by proxies along the way,
-            // so we play it safe and unicode escape them.
-            StringUtil.appendHexJavaScriptRepresentation(sb, c);
+            // No charsetEncoder provided - pass straight latin characters
+            // through, and escape the rest.  Doing the explicit character
+            // check is measurably faster than using the CharsetEncoder.
+            if (c > 0x1f && c <= 0x7f) {
+              sb.append(c);
+            } else {
+              // Other characters can be misinterpreted by some js parsers,
+              // or perhaps mangled by proxies along the way,
+              // so we play it safe and unicode escape them.
+              StringUtil.appendHexJavaScriptRepresentation(sb, c);
+            }
           }
       }
     }
@@ -824,7 +863,9 @@
     StringBuilder sb = new StringBuilder();
     for (int i = 0; i < s.length(); i++) {
       char c = s.charAt(i);
-      // See comments for the same code in strEscape(). Please keep in sync.
+      // Identifiers should always go to Latin1/ ASCII characters because
+      // different browser's rules for valid identifier characters are
+      // crazy.
       if (c > 0x1F && c < 0x7F) {
         sb.append(c);
       } else {
diff --git a/src/com/google/javascript/jscomp/CodePrinter.java b/src/com/google/javascript/jscomp/CodePrinter.java
index 7afa86d..5e4211a 100644
--- a/src/com/google/javascript/jscomp/CodePrinter.java
+++ b/src/com/google/javascript/jscomp/CodePrinter.java
@@ -19,6 +19,7 @@
 import com.google.common.base.Preconditions;
 import com.google.javascript.rhino.Node;
 
+import java.nio.charset.Charset;
 import java.util.ArrayList;
 import java.util.List;
 import java.util.Stack;
@@ -481,6 +482,9 @@
     private boolean outputTypes = false;
     private int lineLengthThreshold = DEFAULT_LINE_LENGTH_THRESHOLD;
     private SourceMap sourceMap = null;
+    // Specify a charset to use when outputting source code.  If null,
+    // then just output ASCII.
+    private Charset outputCharset = null;
 
     /**
      * Sets the root node from which to generate the source code.
@@ -539,6 +543,11 @@
       return this;
     }
 
+    Builder setOutputCharset(Charset outCharset) {
+      this.outputCharset = outCharset;
+      return this;
+    }
+
     /**
      * Generates the source code and returns it.
      */
@@ -555,7 +564,7 @@
               : Format.COMPACT;
 
       return toSource(root, outputFormat, lineBreak, lineLengthThreshold,
-          sourceMap);
+          sourceMap, outputCharset);
     }
   }
 
@@ -570,7 +579,8 @@
    */
   private static String toSource(Node root, Format outputFormat,
                                  boolean lineBreak,  int lineLengthThreshold,
-                                 SourceMap sourceMap) {
+                                 SourceMap sourceMap,
+                                 Charset outputCharset) {
     boolean createSourceMap = (sourceMap != null);
     CodeConsumer cp =
         outputFormat == Format.COMPACT
@@ -579,8 +589,8 @@
         : new PrettyCodePrinter(lineLengthThreshold, createSourceMap);
     CodeGenerator cg =
         outputFormat == Format.TYPED
-        ? new TypedCodeGenerator(cp)
-        : new CodeGenerator(cp);
+        ? new TypedCodeGenerator(cp, outputCharset)
+        : new CodeGenerator(cp, outputCharset);
     cg.add(root);
 
     String code = ((HasGetCode) cp).getCode();
diff --git a/src/com/google/javascript/jscomp/Compiler.java b/src/com/google/javascript/jscomp/Compiler.java
index c2d49c2..db51587 100644
--- a/src/com/google/javascript/jscomp/Compiler.java
+++ b/src/com/google/javascript/jscomp/Compiler.java
@@ -541,6 +541,10 @@
     if (options_.recordFunctionInformation) {
       recordFunctionInformation();
     }
+
+    if (options_.devMode == DevMode.START_AND_END) {
+      runSanityCheck();
+    }
   }
 
   public void parse() {
@@ -655,12 +659,16 @@
     }
   };
 
-  private void maybeSanityCheck(String passName) {
+  private void maybeSanityCheck() {
     if (options_.devMode == DevMode.EVERY_PASS) {
-      sanityCheck.create(this).process(null, jsRoot);
+      runSanityCheck();
     }
   }
 
+  private void runSanityCheck() {
+    sanityCheck.create(this).process(null, jsRoot);
+  }
+
   /**
    * Removes try/catch/finally statements for easier debugging.
    */
@@ -725,7 +733,7 @@
     currentPassName = null;
     currentTracer = null;
 
-    maybeSanityCheck(passToCheck);
+    maybeSanityCheck();
   }
 
   /**
@@ -969,7 +977,7 @@
         }
 
         if (devMode) {
-          sanityCheck.create(this).process(null, n);
+          runSanityCheck();
           if (hasErrors()) {
             return null;
           }
@@ -1195,6 +1203,7 @@
     builder.setPrettyPrint(options_.prettyPrint);
     builder.setLineBreak(options_.lineBreak);
     builder.setSourceMap(sourceMap_);
+    builder.setOutputCharset(options_.outputCharset);
     return builder.build();
   }
 
diff --git a/src/com/google/javascript/jscomp/CompilerOptions.java b/src/com/google/javascript/jscomp/CompilerOptions.java
index 76b1739..f834bf2 100644
--- a/src/com/google/javascript/jscomp/CompilerOptions.java
+++ b/src/com/google/javascript/jscomp/CompilerOptions.java
@@ -24,6 +24,7 @@
 import com.google.javascript.rhino.Token;
 
 import java.io.Serializable;
+import java.nio.charset.Charset;
 import java.util.Collections;
 import java.util.Map;
 import java.util.Set;
@@ -527,6 +528,10 @@
   /** The output path for the source map. */
   public String sourceMapOutputPath;
 
+  /**
+   * Charset to use when generating code.  If null, then output ASCII.
+   */
+  public Charset outputCharset;
 
   /**
    * Initializes compiler options. All options are disabled by default.
@@ -846,6 +851,11 @@
     START,
 
     /**
+     * At the start and at the end of all optimizations.
+     */
+    START_AND_END,
+
+    /**
      * After every pass
      */
     EVERY_PASS
diff --git a/src/com/google/javascript/jscomp/CompilerRunner.java b/src/com/google/javascript/jscomp/CompilerRunner.java
index bef9df5..ffe7deb 100644
--- a/src/com/google/javascript/jscomp/CompilerRunner.java
+++ b/src/com/google/javascript/jscomp/CompilerRunner.java
@@ -63,7 +63,7 @@
       = Flag.value(WarningLevel.DEFAULT);
 
   @FlagSpec(help = "Specifies whether the default externs should be excluded.")
-  private static final Flag<Boolean> FLAG_use_only_custom_externs
+  static final Flag<Boolean> FLAG_use_only_custom_externs
       = Flag.value(false);
 
   /**
diff --git a/src/com/google/javascript/jscomp/ControlFlowAnalysis.java b/src/com/google/javascript/jscomp/ControlFlowAnalysis.java
index 2121474..d5bcabe 100644
--- a/src/com/google/javascript/jscomp/ControlFlowAnalysis.java
+++ b/src/com/google/javascript/jscomp/ControlFlowAnalysis.java
@@ -17,9 +17,9 @@
 package com.google.javascript.jscomp;
 
 import com.google.common.base.Preconditions;
+import com.google.common.collect.HashMultimap;
 import com.google.common.collect.Maps;
 import com.google.common.collect.Multimap;
-import com.google.common.collect.Multimaps;
 import com.google.javascript.jscomp.ControlFlowGraph.Branch;
 import com.google.javascript.jscomp.NodeTraversal.Callback;
 import com.google.javascript.jscomp.graph.DiGraph.DiGraphNode;
@@ -34,7 +34,6 @@
 import java.util.Map;
 import java.util.PriorityQueue;
 
-
 /**
  * This is a compiler pass that computes a control flow graph.
  *
@@ -124,7 +123,7 @@
    *   foo() -> bar()
    *   bar() -> END
    */
-  private final Multimap<Node, Node> finallyMap = Multimaps.newHashMultimap();
+  private final Multimap<Node, Node> finallyMap = HashMultimap.create();
 
   /**
    * Constructor.
diff --git a/src/com/google/javascript/jscomp/DisambiguateProperties.java b/src/com/google/javascript/jscomp/DisambiguateProperties.java
index fd46fcf..a5a8184 100644
--- a/src/com/google/javascript/jscomp/DisambiguateProperties.java
+++ b/src/com/google/javascript/jscomp/DisambiguateProperties.java
@@ -16,11 +16,11 @@
 package com.google.javascript.jscomp;
 
 import static com.google.common.base.Preconditions.checkState;
+import com.google.common.collect.HashMultimap;
 import com.google.common.collect.ImmutableSet;
 import com.google.common.collect.Lists;
 import com.google.common.collect.Maps;
 import com.google.common.collect.Multimap;
-import com.google.common.collect.Multimaps;
 import com.google.common.collect.Sets;
 import com.google.javascript.jscomp.ConcreteType.ConcreteFunctionType;
 import com.google.javascript.jscomp.ConcreteType.ConcreteInstanceType;
@@ -28,8 +28,8 @@
 import com.google.javascript.jscomp.ConcreteType.ConcreteUniqueType;
 import com.google.javascript.jscomp.NodeTraversal.ScopedCallback;
 import com.google.javascript.jscomp.TypeValidator.TypeMismatch;
-import com.google.javascript.jscomp.graph.UnionFind;
 import com.google.javascript.jscomp.graph.StandardUnionFind;
+import com.google.javascript.jscomp.graph.UnionFind;
 import com.google.javascript.rhino.Node;
 import com.google.javascript.rhino.Token;
 import com.google.javascript.rhino.jstype.FunctionPrototypeType;
@@ -43,10 +43,10 @@
 
 import java.util.Collection;
 import java.util.List;
-import java.util.logging.Logger;
 import java.util.Map;
 import java.util.Set;
 import java.util.Stack;
+import java.util.logging.Logger;
 
 /**
  * DisambiguateProperties renames properties to disambiguate between unrelated
@@ -539,7 +539,7 @@
 
   /** Returns a map from field name to types for which it will be renamed. */
   Multimap<String, Collection<T>> getRenamedTypesForTesting() {
-    Multimap<String, Collection<T>> ret = Multimaps.newHashMultimap();
+    Multimap<String, Collection<T>> ret = HashMultimap.create();
     for (Map.Entry<String, Property> entry: properties.entrySet()) {
       Property prop = entry.getValue();
       if (!prop.skipRenaming) {
diff --git a/src/com/google/javascript/jscomp/FunctionRewriter.java b/src/com/google/javascript/jscomp/FunctionRewriter.java
index 5980b7d..7e2bd8f 100644
--- a/src/com/google/javascript/jscomp/FunctionRewriter.java
+++ b/src/com/google/javascript/jscomp/FunctionRewriter.java
@@ -16,9 +16,9 @@
 
 package com.google.javascript.jscomp;
 
+import com.google.common.collect.HashMultimap;
 import com.google.common.collect.ImmutableList;
 import com.google.common.collect.Multimap;
-import com.google.common.collect.Multimaps;
 import com.google.javascript.jscomp.NodeTraversal.Callback;
 import com.google.javascript.rhino.Node;
 import com.google.javascript.rhino.Token;
@@ -62,7 +62,7 @@
                                               new EmptyFunctionReducer(),
                                               new IdentityReducer());
 
-    Multimap<Reducer, Reduction> reductionMap = Multimaps.newHashMultimap();
+    Multimap<Reducer, Reduction> reductionMap = HashMultimap.create();
 
     // Accumulate possible reductions in the reduction multi map.  They
     // will be applied in the loop below.
diff --git a/src/com/google/javascript/jscomp/JSSourceFile.java b/src/com/google/javascript/jscomp/JSSourceFile.java
index 7af6969..92f04dd 100644
--- a/src/com/google/javascript/jscomp/JSSourceFile.java
+++ b/src/com/google/javascript/jscomp/JSSourceFile.java
@@ -18,10 +18,12 @@
 
 
 import com.google.common.annotations.VisibleForTesting;
+import com.google.common.base.Charsets;
 
 import java.io.File;
 import java.io.IOException;
 import java.io.InputStream;
+import java.nio.charset.Charset;
 
 
 /**
@@ -33,12 +35,20 @@
  */
 public class JSSourceFile extends SourceFile {
 
+  public static JSSourceFile fromFile(String fileName, Charset charSet) {
+    return new JSSourceFile(SourceFile.fromFile(fileName, charSet));
+  }
+
   public static JSSourceFile fromFile(String fileName) {
-    return new JSSourceFile(SourceFile.fromFile(fileName));
+    return new JSSourceFile(SourceFile.fromFile(fileName, Charsets.UTF_8));
+  }
+
+  public static JSSourceFile fromFile(File file, Charset charSet) {
+    return new JSSourceFile(SourceFile.fromFile(file, charSet));
   }
 
   public static JSSourceFile fromFile(File file) {
-    return new JSSourceFile(SourceFile.fromFile(file));
+    return new JSSourceFile(SourceFile.fromFile(file, Charsets.UTF_8));
   }
 
   public static JSSourceFile fromCode(String fileName, String code) {
diff --git a/src/com/google/javascript/jscomp/MethodCheck.java b/src/com/google/javascript/jscomp/MethodCheck.java
index 188c327..4a24013 100644
--- a/src/com/google/javascript/jscomp/MethodCheck.java
+++ b/src/com/google/javascript/jscomp/MethodCheck.java
@@ -16,15 +16,14 @@
 
 package com.google.javascript.jscomp;
 
+import com.google.common.collect.HashMultimap;
 import com.google.common.collect.Multimap;
-import com.google.common.collect.Multimaps;
 import com.google.javascript.jscomp.FunctionCheck.FunctionInfo;
 import com.google.javascript.jscomp.NodeTraversal.Callback;
 import com.google.javascript.rhino.Node;
 
 import java.util.Collection;
 
-
 /**
  * Checks method arity. Looks for the following ways of defining methods:
  *
@@ -47,7 +46,7 @@
 
   /** Map from method names to possible signatures */
   final Multimap<String,FunctionInfo> methodSignatures =
-      Multimaps.newHashMultimap();
+      HashMultimap.create();
 
   final MethodCompilerPass.SignatureStore signatureCallback = new Store();
 
diff --git a/src/com/google/javascript/jscomp/MethodCompilerPass.java b/src/com/google/javascript/jscomp/MethodCompilerPass.java
index 9595272..94fca01 100644
--- a/src/com/google/javascript/jscomp/MethodCompilerPass.java
+++ b/src/com/google/javascript/jscomp/MethodCompilerPass.java
@@ -16,9 +16,9 @@
 
 package com.google.javascript.jscomp;
 
+import com.google.common.collect.HashMultimap;
 import com.google.common.collect.Lists;
 import com.google.common.collect.Multimap;
-import com.google.common.collect.Multimaps;
 import com.google.common.collect.Sets;
 import com.google.javascript.jscomp.NodeTraversal.AbstractPostOrderCallback;
 import com.google.javascript.jscomp.NodeTraversal.Callback;
@@ -46,7 +46,7 @@
   final Set<String> nonMethodProperties = Sets.newHashSet();
 
   final Multimap<String, Node> methodDefinitions =
-      Multimaps.newHashMultimap();
+      HashMultimap.create();
 
   final AbstractCompiler compiler;
 
diff --git a/src/com/google/javascript/jscomp/NameReferenceGraph.java b/src/com/google/javascript/jscomp/NameReferenceGraph.java
index 7c257d6..7813a14 100644
--- a/src/com/google/javascript/jscomp/NameReferenceGraph.java
+++ b/src/com/google/javascript/jscomp/NameReferenceGraph.java
@@ -17,16 +17,16 @@
 package com.google.javascript.jscomp;
 
 import com.google.common.base.Preconditions;
+import com.google.common.collect.HashMultimap;
 import com.google.common.collect.Lists;
 import com.google.common.collect.Maps;
 import com.google.common.collect.Multimap;
-import com.google.common.collect.Multimaps;
 import com.google.javascript.jscomp.DefinitionsRemover.AssignmentDefinition;
 import com.google.javascript.jscomp.DefinitionsRemover.Definition;
 import com.google.javascript.jscomp.DefinitionsRemover.NamedFunctionDefinition;
 import com.google.javascript.jscomp.DefinitionsRemover.UnknownDefinition;
-import com.google.javascript.jscomp.graph.LinkedDirectedGraph;
 import com.google.javascript.jscomp.graph.GraphNode;
+import com.google.javascript.jscomp.graph.LinkedDirectedGraph;
 import com.google.javascript.rhino.Node;
 import com.google.javascript.rhino.jstype.JSType;
 import com.google.javascript.rhino.jstype.JSTypeNative;
@@ -66,7 +66,7 @@
   // will give us the Reference edges. For example a CALL node will map to a
   // list of possible call edge.
   private final Multimap<Node, DiGraphEdge<Name, Reference>>
-      referenceMap = Multimaps.newHashMultimap();
+      referenceMap = HashMultimap.create();
 
   // Given a qualified name, provides the Name object.
   private Map<String, Name> nameMap = Maps.newHashMap();
diff --git a/src/com/google/javascript/jscomp/NameReferenceGraphConstruction.java b/src/com/google/javascript/jscomp/NameReferenceGraphConstruction.java
index aef9ba8..e46eee1 100644
--- a/src/com/google/javascript/jscomp/NameReferenceGraphConstruction.java
+++ b/src/com/google/javascript/jscomp/NameReferenceGraphConstruction.java
@@ -16,11 +16,10 @@
 
 package com.google.javascript.jscomp;
 
-import javax.annotation.Nullable;
 import com.google.common.base.Pair;
 import com.google.common.base.Preconditions;
+import com.google.common.collect.HashMultimap;
 import com.google.common.collect.Multimap;
-import com.google.common.collect.Multimaps;
 import com.google.javascript.jscomp.NameReferenceGraph.Name;
 import com.google.javascript.jscomp.NameReferenceGraph.Reference;
 import com.google.javascript.jscomp.NodeTraversal.ScopedCallback;
@@ -37,6 +36,8 @@
 import java.util.ArrayList;
 import java.util.Collection;
 
+import javax.annotation.Nullable;
+
 /**
  * Constructs a name reference graph.
  *
@@ -55,7 +56,7 @@
   // The accuracy of the analysis will depend heavily on eliminating the need
   // to resort to this map.
   private final Multimap<String, Pair<Name, Reference>> unknownNameUse =
-      Multimaps.newHashMultimap();
+      HashMultimap.create();
 
   // Should we continue even if we found a type checker bug.
   private static final boolean CONSERVATIVE = false;
diff --git a/src/com/google/javascript/jscomp/SimpleDefinitionFinder.java b/src/com/google/javascript/jscomp/SimpleDefinitionFinder.java
index a8eae1f..fccddb2 100644
--- a/src/com/google/javascript/jscomp/SimpleDefinitionFinder.java
+++ b/src/com/google/javascript/jscomp/SimpleDefinitionFinder.java
@@ -17,9 +17,9 @@
 package com.google.javascript.jscomp;
 
 import com.google.common.base.Preconditions;
+import com.google.common.collect.HashMultimap;
 import com.google.common.collect.Maps;
 import com.google.common.collect.Multimap;
-import com.google.common.collect.Multimaps;
 import com.google.javascript.jscomp.DefinitionsRemover.Definition;
 import com.google.javascript.jscomp.DefinitionsRemover.ExternalNameOnlyDefinition;
 import com.google.javascript.jscomp.DefinitionsRemover.UnknownDefinition;
@@ -51,8 +51,8 @@
   public SimpleDefinitionFinder(AbstractCompiler compiler) {
     this.compiler = compiler;
     this.definitionSiteMap = Maps.newHashMap();
-    this.nameDefinitionMultimap = Multimaps.newHashMultimap();
-    this.nameUseSiteMultimap = Multimaps.newHashMultimap();
+    this.nameDefinitionMultimap = HashMultimap.create();
+    this.nameUseSiteMultimap = HashMultimap.create();
   }
 
   /**
diff --git a/src/com/google/javascript/jscomp/SourceFile.java b/src/com/google/javascript/jscomp/SourceFile.java
index 6d66078..770db00 100644
--- a/src/com/google/javascript/jscomp/SourceFile.java
+++ b/src/com/google/javascript/jscomp/SourceFile.java
@@ -27,6 +27,7 @@
 import java.io.InputStream;
 import java.io.InputStreamReader;
 import java.io.Reader;
+import java.nio.charset.Charset;
 
 /**
  * An abstract representation of a source file that provides access to
@@ -204,10 +205,18 @@
     }
   }
 
+  public static SourceFile fromFile(String fileName, Charset c) {
+    return fromFile(new File(fileName), c);
+  }
+
   public static SourceFile fromFile(String fileName) {
     return fromFile(new File(fileName));
   }
 
+  public static SourceFile fromFile(File file, Charset c) {
+    return new OnDisk(file, c);
+  }
+
   public static SourceFile fromFile(File file) {
     return new OnDisk(file);
   }
@@ -287,9 +296,22 @@
   static class OnDisk extends SourceFile {
     private final File file;
 
+    // This is stored as a String, but passed in and out as a Charset so that
+    // we can serialize the class.
+    // Default input file format for JSCompiler has always been UTF_8.
+    protected String inputCharset = Charsets.UTF_8.name();
+
+    OnDisk(File file, Charset c) {
+      this(file);
+      if (c != null) {
+        this.setCharset(c);
+      }
+    }
+
+    // No Charset provided?
     OnDisk(File file) {
       super(file.getPath());
-      this.file = file;
+      this.file = file;     
     }
 
     @Override
@@ -297,7 +319,7 @@
       String cachedCode = super.getCode();
 
       if (cachedCode == null) {
-        cachedCode = Files.toString(file, Charsets.UTF_8);
+        cachedCode = Files.toString(file, this.getCharset());
         super.setCode(cachedCode);
       }
       return cachedCode;
@@ -309,5 +331,25 @@
     public void clearCachedSource() {
       super.setCode(null);
     }
+
+    /**
+     * Store the Charset specification as the string version of the name,
+     * rather than the Charset itself.  This allows us to serialize the
+     * SourceFile class.
+     * @param c charset to use when reading the input.
+     */
+    public void setCharset(Charset c) {
+      inputCharset = c.name();
+    }
+
+    /**
+     * Get the Charset specifying how we're supposed to read the file
+     * in off disk and into UTF-16.  This is stored as a strong to allow
+     * SourceFile to be serialized.
+     * @return Charset object representing charset to use.
+     */
+    public Charset getCharset() {
+      return Charset.forName(inputCharset);
+    }    
   }
 }
diff --git a/src/com/google/javascript/jscomp/TypedCodeGenerator.java b/src/com/google/javascript/jscomp/TypedCodeGenerator.java
index d9e0a00..3342fd9 100644
--- a/src/com/google/javascript/jscomp/TypedCodeGenerator.java
+++ b/src/com/google/javascript/jscomp/TypedCodeGenerator.java
@@ -22,6 +22,8 @@
 import com.google.javascript.rhino.jstype.JSType;
 import com.google.javascript.rhino.jstype.ObjectType;
 
+import java.nio.charset.Charset;
+
 
 /**
  * A code generator that outputs type annotations for functions and
@@ -29,8 +31,8 @@
 *
  */
 class TypedCodeGenerator extends CodeGenerator {
-  TypedCodeGenerator(CodeConsumer consumer) {
-    super(consumer);
+  TypedCodeGenerator(CodeConsumer consumer, Charset outputCharset) {
+    super(consumer, outputCharset);
   }
 
   @Override
diff --git a/src/com/google/javascript/jscomp/WarningLevel.java b/src/com/google/javascript/jscomp/WarningLevel.java
index d7b3800..1cdb833 100644
--- a/src/com/google/javascript/jscomp/WarningLevel.java
+++ b/src/com/google/javascript/jscomp/WarningLevel.java
@@ -58,6 +58,7 @@
     options.checkUndefinedProperties = CheckLevel.OFF;
     options.checkUnusedPropertiesEarly = false;
     options.checkUnreachableCode = CheckLevel.WARNING;
+    options.checkControlStructures = true;
   }
 
   /**
diff --git a/src/com/google/javascript/jscomp/parsing/IRFactory.java b/src/com/google/javascript/jscomp/parsing/IRFactory.java
index a97fc79..e80fef8 100644
--- a/src/com/google/javascript/jscomp/parsing/IRFactory.java
+++ b/src/com/google/javascript/jscomp/parsing/IRFactory.java
@@ -19,13 +19,8 @@
 import static com.google.javascript.jscomp.mozilla.rhino.Token.CommentType.JSDOC;
 
 import com.google.common.base.Preconditions;
-
-import com.google.javascript.rhino.JSDocInfo;
-import com.google.javascript.rhino.jstype.JSTypeRegistry;
-import com.google.javascript.rhino.Node;
-import com.google.javascript.rhino.ScriptOrFnNode;
-import com.google.javascript.rhino.Token;
-
+import com.google.common.collect.Sets;
+import com.google.javascript.jscomp.mozilla.rhino.ErrorReporter;
 import com.google.javascript.jscomp.mozilla.rhino.ast.ArrayLiteral;
 import com.google.javascript.jscomp.mozilla.rhino.ast.Assignment;
 import com.google.javascript.jscomp.mozilla.rhino.ast.AstNode;
@@ -69,8 +64,13 @@
 import com.google.javascript.jscomp.mozilla.rhino.ast.VariableInitializer;
 import com.google.javascript.jscomp.mozilla.rhino.ast.WhileLoop;
 import com.google.javascript.jscomp.mozilla.rhino.ast.WithStatement;
+import com.google.javascript.rhino.JSDocInfo;
+import com.google.javascript.rhino.Node;
+import com.google.javascript.rhino.ScriptOrFnNode;
+import com.google.javascript.rhino.Token;
+import com.google.javascript.rhino.jstype.JSTypeRegistry;
 
-import com.google.javascript.jscomp.mozilla.rhino.ErrorReporter;
+import java.util.Set;
 
 /**
  * IRFactory transforms the new AST to the old AST.
@@ -91,6 +91,9 @@
   private final ErrorReporter errorReporter;
   private final TransformDispatcher transformDispatcher;
 
+  // non-static for thread safety
+  private final Set<String> ALLOWED_DIRECTIVES = Sets.newHashSet("use strict");
+
   private IRFactory(String sourceString,
                     String sourceName,
                     Config config,
@@ -363,9 +366,45 @@
       for (com.google.javascript.jscomp.mozilla.rhino.Node child : rootNode) {
         node.addChildToBack(transform((AstNode)child));
       }
+      parseDirectives(node);
       return node;
     }
 
+    /**
+     * Parse the directives, encode them in the AST, and remove their nodes.
+     *
+     * For information on ES5 directives, see section 14.1 of
+     * Ecma-262, Edition 5.
+     *
+     * It would be nice if Rhino would eventually take care of this for
+     * us, but right now their directive-processing is a one-off.
+     */
+    private void parseDirectives(Node node) {
+      // Remove all the directives, and encode them in the AST.
+      Set<String> directives = null;
+      while (isDirective(node.getFirstChild())) {
+        String directive = node.removeFirstChild().getFirstChild().getString();
+        if (directives == null) {
+          directives = Sets.newHashSet(directive);
+        } else {
+          directives.add(directive);
+        }
+      }
+
+      if (directives != null) {
+        node.setDirectives(directives);
+      }
+    }
+
+    private boolean isDirective(Node n) {
+      if (n == null) return false;
+
+      int nType = n.getType();
+      return (nType == Token.EXPR_RESULT || nType == Token.EXPR_VOID) &&
+          n.getFirstChild().getType() == Token.STRING &&
+          ALLOWED_DIRECTIVES.contains(n.getFirstChild().getString());
+    }
+
     @Override
     Node processBlock(Block blockNode) {
       return processGeneric(blockNode);
@@ -528,7 +567,10 @@
         lp.addChildToBack(transform(param));
       }
       node.addChildToBack(lp);
-      node.addChildToBack(transform(functionNode.getBody()));
+
+      Node bodyNode = transform(functionNode.getBody());
+      parseDirectives(bodyNode);
+      node.addChildToBack(bodyNode);
      return node;
     }
 
diff --git a/src/com/google/javascript/rhino/Node.java b/src/com/google/javascript/rhino/Node.java
index 361551c..7f57485 100644
--- a/src/com/google/javascript/rhino/Node.java
+++ b/src/com/google/javascript/rhino/Node.java
@@ -40,9 +40,9 @@
 
 package com.google.javascript.rhino;
 
-import com.google.javascript.rhino.jstype.JSType;
 import com.google.common.base.Pair;
 import com.google.common.base.Preconditions;
+import com.google.javascript.rhino.jstype.JSType;
 
 import java.io.IOException;
 import java.io.Serializable;
@@ -50,6 +50,7 @@
 import java.util.Collections;
 import java.util.Iterator;
 import java.util.NoSuchElementException;
+import java.util.Set;
 
 /**
  * This class implements the root of the intermediate representation.
@@ -146,7 +147,8 @@
                                     // probably generated from Java code, and
                                     // should be resolved to the proper
                                     // overload if possible.
-        LAST_PROP          = 47;
+        DIRECTIVES         = 48,    // The ES5 directives on this node.
+        LAST_PROP          = 48;
 
     // values of ISNUMBER_PROP to specify
     // which of the children are Number types
@@ -1909,6 +1911,20 @@
     }
 
     /**
+     * Sets the ES5 directives on this node.
+     */
+    public void setDirectives(Set<String> val) {
+        putProp(DIRECTIVES, val);
+    }
+
+    /**
+     * Returns the set of ES5 directives for this node.
+     */
+    public Set<String> getDirectives() {
+        return (Set<String>) getProp(DIRECTIVES);
+    }
+
+    /**
      * Sets whether this is a synthetic block that should not be considered
      * a real source block.
      */
diff --git a/src/com/google/javascript/rhino/jstype/JSTypeRegistry.java b/src/com/google/javascript/rhino/jstype/JSTypeRegistry.java
index 10f5a3d..36e5cb2 100644
--- a/src/com/google/javascript/rhino/jstype/JSTypeRegistry.java
+++ b/src/com/google/javascript/rhino/jstype/JSTypeRegistry.java
@@ -40,9 +40,9 @@
 package com.google.javascript.rhino.jstype;
 
 import com.google.common.collect.ArrayListMultimap;
+import com.google.common.collect.HashMultimap;
 import com.google.common.collect.Maps;
 import com.google.common.collect.Multimap;
-import com.google.common.collect.Multimaps;
 import com.google.common.collect.Sets;
 import com.google.javascript.rhino.ErrorReporter;
 import com.google.javascript.rhino.Node;
@@ -122,7 +122,7 @@
 
   // A map from interface name to types that implement it.
   private final Multimap<String, FunctionType> interfaceToImplementors =
-      Multimaps.newHashMultimap();
+      HashMultimap.create();
 
   // All the unresolved named types.
   private final Multimap<StaticScope<JSType>, NamedType> unresolvedNamedTypes =
diff --git a/test/com/google/javascript/jscomp/CompilerRunnerTest.java b/test/com/google/javascript/jscomp/CompilerRunnerTest.java
index f5651de..24fee54 100644
--- a/test/com/google/javascript/jscomp/CompilerRunnerTest.java
+++ b/test/com/google/javascript/jscomp/CompilerRunnerTest.java
@@ -52,6 +52,8 @@
   @Override
   public void tearDown() {
     Flags.resetAllFlagsForTest();
+    // NOTE(nicksantos): ANT needs this for some weird reason.
+    AbstractCompilerRunner.FLAG_define.resetForTest();
     Flags.enableStateCheckingForTest();
   }
 
@@ -103,6 +105,17 @@
          "var FOO = true, BAR = 5;");
   }
 
+  public void testScriptStrictModeNoWarning() {
+    test("'use strict';", "");
+    test("'no use strict';", CheckSideEffects.USELESS_CODE_ERROR);
+  }
+
+  public void testFunctionStrictModeNoWarning() {
+    test("function f() {'use strict';}", "function f() {}");
+    test("function f() {'no use strict';}",
+         CheckSideEffects.USELESS_CODE_ERROR);
+  }
+
   /* Helper functions */
 
   private void testSame(String original) {
@@ -172,6 +185,8 @@
     CompilerOptions options = runner.createOptions();
     try {
       runner.setRunOptions(options);
+    } catch (AbstractCompilerRunner.FlagUsageException e) {
+      fail("Unexpected exception " + e);
     } catch (IOException e) {
       assert(false);
     }
diff --git a/test/com/google/javascript/jscomp/UnreachableCodeEliminationTest.java b/test/com/google/javascript/jscomp/UnreachableCodeEliminationTest.java
index e0d06b2..a34acba 100644
--- a/test/com/google/javascript/jscomp/UnreachableCodeEliminationTest.java
+++ b/test/com/google/javascript/jscomp/UnreachableCodeEliminationTest.java
@@ -100,6 +100,14 @@
     test("a.b.MyClass.prototype.memberName;", "");
   }
 
+  public void testRemoveUselessStrings() {
+    test("'a';", "");
+  }
+
+  public void testNoRemoveUseStrict() {
+    test("'use strict';", "'use strict'");
+  }
+
   public void testNoRemoveUselessNameStatements() {
     removeNoOpStatements = false;
     testSame("a;");
diff --git a/test/com/google/javascript/jscomp/parsing/IRFactoryTest.java b/test/com/google/javascript/jscomp/parsing/IRFactoryTest.java
index 35f6f4e..8641ddb 100644
--- a/test/com/google/javascript/jscomp/parsing/IRFactoryTest.java
+++ b/test/com/google/javascript/jscomp/parsing/IRFactoryTest.java
@@ -16,6 +16,7 @@
 
 package com.google.javascript.jscomp.parsing;
 
+import com.google.common.collect.Sets;
 import com.google.javascript.jscomp.mozilla.rhino.CompilerEnvirons;
 import com.google.javascript.jscomp.mozilla.rhino.Parser;
 import com.google.javascript.jscomp.mozilla.rhino.ast.AstRoot;
@@ -33,6 +34,13 @@
     parse("");
   }
 
+  public void testStrictScript() throws Exception {
+    assertNull(newParse("").getDirectives());
+    assertEquals(
+        Sets.newHashSet("use strict"),
+        newParse("'use strict'").getDirectives());
+  }
+
   public void testName() throws Exception {
     parse("a");
   }
